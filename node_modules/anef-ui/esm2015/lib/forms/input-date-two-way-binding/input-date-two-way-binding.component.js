/**
 * @fileoverview added by tsickle
 * Generated from: lib/forms/input-date-two-way-binding/input-date-two-way-binding.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { generateGuid } from '../../shared/guid';
export class InputDateTwoWayBindingComponent {
    constructor() {
        this.required = false;
        this.readonly = false;
        this.disabled = false;
        this.showTime = false;
        this.helpText = '';
        this.showCheckbox = false;
        this.checkboxModel = false;
        this.disableDateOnCheck = false;
        this.ngModelChange = new EventEmitter();
        this.checkboxValueChanged = new EventEmitter();
        this.yearRangeMin = new Date().getFullYear() - 100;
        this.yearRangeMax = new Date().getFullYear() + 3;
        this.guid = generateGuid();
        this.error = null;
    }
    /**
     * @param {?} model
     * @return {?}
     */
    set model(model) {
        if (typeof model === 'string') {
            if (!model || this.showTime) {
                this.modelDate = new Date(model);
            }
            else {
                model = new Date(model);
                this.modelDate = new Date(model.getUTCFullYear(), model.getUTCMonth(), model.getUTCDate());
            }
        }
        else {
            if (!model || this.showTime) {
                this.modelDate = model;
            }
            else {
                this.modelDate = new Date(model.getUTCFullYear(), model.getUTCMonth(), model.getUTCDate());
            }
        }
    }
    /**
     * @param {?} errors
     * @return {?}
     */
    set errors(errors) {
        if (!errors) {
            this.error = null;
        }
        else if (typeof (errors) === 'string') {
            this.error = [errors];
        }
        else {
            this.error = errors;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.disableDateFromCheck = (this.checkboxModel && this.disableDateOnCheck) ? true : false;
        this.fr = {
            firstDayOfWeek: 1,
            dayNames: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],
            dayNamesShort: ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'],
            dayNamesMin: ['Di', 'Lu', 'Ma', 'Me', 'Je', 'Ve', 'Sa'],
            monthNames: [
                'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet',
                'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'
            ],
            monthNamesShort: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun', 'Jul', 'Aoû', 'Set', 'Oct', 'Nov', 'Déc'],
            today: `Aujourd'hui`,
            clear: 'Annuler',
            dateFormat: 'dd/mm/yy',
            weekHeader: 'Sem'
        };
    }
    /**
     * @param {?} event
     * @return {?}
     */
    checkboxChanged(event) {
        this.checkboxValueChanged.emit(event);
        if (event === true && this.disableDateOnCheck) {
            this.modelDate = null;
            this.disableDateFromCheck = true;
            this.ngModelChange.emit(this.modelDate);
        }
        else {
            this.disableDateFromCheck = false;
        }
    }
    /**
     * @param {?} date
     * @return {?}
     */
    onDateChange(date) {
        if (!date || this.showTime) {
            this.ngModelChange.emit(date);
        }
        else {
            /** @type {?} */
            const utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
            this.ngModelChange.emit(utcDate);
        }
    }
}
InputDateTwoWayBindingComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line: component-selector
                selector: 'anef-input-date-two-way-binding',
                template: "<div class=\"p-grid nogutter\">\n  <div class=\"p-col-12\">\n    <label *ngIf=\"label\" for=\"{{guid}}\">\n      {{label}} <span *ngIf=\"required && !(readonly || disabled)\" class=\"redish\">*</span> :\n      <button *ngIf=\"helpText\" class=\"help-button\" title=\"{{helpText}}\">\n        <i class=\"fa fa-question-circle fa-lg\"></i>\n      </button>\n    </label>\n\n    <div class=\"input\">\n      <div *ngIf=\"!readonly; else textual\" class=\"ui-inputgroup\">\n        <p-calendar\n          (ngModelChange)=\"onDateChange($event)\"\n          [(ngModel)]=\"modelDate\"\n          [disabled]=\"disabled || disableDateFromCheck\"\n          [inputId]=\"guid\"\n          [locale]=\"fr\"\n          [maxDate]=\"maxDateValue\"\n          [minDate]=\"minDateValue\"\n          [monthNavigator]=\"true\"\n          [ngClass]=\"{'error': error && error.length}\"\n          [readonlyInput]=\"readonly\"\n          [required]=\"required\"\n          [showIcon]=\"true\"\n          [showTime]=\"showTime\"\n          [yearNavigator]=\"true\"\n          appendTo=\"body\"\n          dateFormat=\"dd/mm/yy\"\n          hourFormat=\"24\"\n          name=\"{{guid}}\"\n          yearRange=\"{{yearRangeMin}}:{{yearRangeMax}}\">\n        </p-calendar>\n        <span\n          *ngIf=\"showCheckbox\"\n          class=\"ui-inputgroup-addon checkbox\"\n          id=\"custom-span-checkbox\"\n        >\n          <p-checkbox\n            (onChange)=\"checkboxChanged($event)\"\n            [(ngModel)]=\"checkboxModel\"\n            binary=\"true\">\n          </p-checkbox>\n        </span>\n        <span\n          *ngIf=\"showCheckbox\"\n          class=\"ui-inputgroup-addon label\">\n          {{checkboxLabel}}\n        </span>\n      </div>\n\n      <ng-template #textual>\n        <div class=\"textual\">\n          <span *ngIf=\"!showTime\">\n            {{ (modelDate !== null) ? (modelDate | date: 'dd/MM/yyyy') : '-' }}\n          </span>\n          <span *ngIf=\"showTime\">\n            {{ (modelDate !== null) ? (modelDate | date: 'dd/MM/yyyy \u00E0 HH:mm') : '-' }}\n          </span>\n          <span *ngIf=\"showCheckbox && checkboxModel\" class=\"textual-checkboxLabel\">\n            {{checkboxLabel}}\n          </span>\n        </div>\n      </ng-template>\n    </div>\n\n    <div *ngIf=\"error && error.length\" class=\"error redish\">\n      <div *ngFor=\"let errorLine of error\">\n        <p>\n          <i class=\"pi pi-info-circle\"></i>\n          <span>{{errorLine}}</span>\n        </p>\n      </div>\n    </div>\n\n  </div>\n</div>\n",
                styles: ["p-calendar{margin-top:-.5rem}label{color:#656565;font-size:1.4rem}.help-button{border:none;background-color:#fff;color:#256cb9}.ui-inputgroup-addon.label{padding:.8rem 1rem 0;text-align:left;color:#271519;background:0 0;border:none;line-height:22px}.ui-inputgroup-addon.checkbox{line-height:3rem;background:0 0;border-right:none;border-top:none;border-bottom:none;padding:0 0 0 1rem}.textual-checkboxLabel{padding-left:1rem}#custom-span-checkbox{border-left:none;line-height:2.9rem}.textual{margin-top:7px}"]
            }] }
];
InputDateTwoWayBindingComponent.propDecorators = {
    model: [{ type: Input }],
    label: [{ type: Input }],
    required: [{ type: Input }],
    readonly: [{ type: Input }],
    disabled: [{ type: Input }],
    minDateValue: [{ type: Input }],
    maxDateValue: [{ type: Input }],
    showTime: [{ type: Input }],
    helpText: [{ type: Input }],
    showCheckbox: [{ type: Input }],
    checkboxModel: [{ type: Input }],
    checkboxLabel: [{ type: Input }],
    disableDateOnCheck: [{ type: Input }],
    errors: [{ type: Input }],
    ngModelChange: [{ type: Output }],
    checkboxValueChanged: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.label;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.required;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.readonly;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.disabled;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.minDateValue;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.maxDateValue;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.showTime;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.helpText;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.showCheckbox;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.checkboxModel;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.checkboxLabel;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.disableDateOnCheck;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.ngModelChange;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.checkboxValueChanged;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.modelDate;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.fr;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.disableDateFromCheck;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.yearRangeMin;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.yearRangeMax;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.guid;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.error;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtZGF0ZS10d28td2F5LWJpbmRpbmcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5lZi11aS8iLCJzb3VyY2VzIjpbImxpYi9mb3Jtcy9pbnB1dC1kYXRlLXR3by13YXktYmluZGluZy9pbnB1dC1kYXRlLXR3by13YXktYmluZGluZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQy9FLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQVFqRCxNQUFNLE9BQU8sK0JBQStCO0lBTjVDO1FBd0JXLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBR2pCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBRXRCLHVCQUFrQixHQUFHLEtBQUssQ0FBQztRQVcxQixrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFDekMseUJBQW9CLEdBQTBCLElBQUksWUFBWSxFQUFFLENBQUM7UUFLM0UsaUJBQVksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxHQUFHLEdBQUcsQ0FBQztRQUM5QyxpQkFBWSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVDLFNBQUksR0FBRyxZQUFZLEVBQUUsQ0FBQztRQUN0QixVQUFLLEdBQUcsSUFBSSxDQUFDO0lBdUNmLENBQUM7Ozs7O0lBdEZDLElBQWEsS0FBSyxDQUFDLEtBQW9CO1FBQ3JDLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFO1lB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V3BDLHdEQUFtRDs7SUFDbkQsK0RBQTJFOztJQUUzRSxvREFBZ0I7O0lBQ2hCLDZDQUFROztJQUNSLCtEQUE4Qjs7SUFDOUIsdURBQThDOztJQUM5Qyx1REFBNEM7O0lBQzVDLCtDQUFzQjs7SUFDdEIsZ0RBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBnZW5lcmF0ZUd1aWQgfSBmcm9tICcuLi8uLi9zaGFyZWQvZ3VpZCc7XG5cbkBDb21wb25lbnQoe1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGNvbXBvbmVudC1zZWxlY3RvclxuICBzZWxlY3RvcjogJ2FuZWYtaW5wdXQtZGF0ZS10d28td2F5LWJpbmRpbmcnLFxuICB0ZW1wbGF0ZVVybDogJy4vaW5wdXQtZGF0ZS10d28td2F5LWJpbmRpbmcuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9pbnB1dC1kYXRlLXR3by13YXktYmluZGluZy5jb21wb25lbnQuc2NzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBJbnB1dERhdGVUd29XYXlCaW5kaW5nQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgc2V0IG1vZGVsKG1vZGVsOiBEYXRlIHwgc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiBtb2RlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICghbW9kZWwgfHwgdGhpcy5zaG93VGltZSkge1xuICAgICAgICB0aGlzLm1vZGVsRGF0ZSA9IG5ldyBEYXRlKG1vZGVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vZGVsID0gbmV3IERhdGUobW9kZWwpO1xuICAgICAgICB0aGlzLm1vZGVsRGF0ZSA9IG5ldyBEYXRlKG1vZGVsLmdldFVUQ0Z1bGxZZWFyKCksIG1vZGVsLmdldFVUQ01vbnRoKCksIG1vZGVsLmdldFVUQ0RhdGUoKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghbW9kZWwgfHwgdGhpcy5zaG93VGltZSkge1xuICAgICAgICB0aGlzLm1vZGVsRGF0ZSA9IG1vZGVsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tb2RlbERhdGUgPSBuZXcgRGF0ZShtb2RlbC5nZXRVVENGdWxsWWVhcigpLCBtb2RlbC5nZXRVVENNb250aCgpLCBtb2RlbC5nZXRVVENEYXRlKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBASW5wdXQoKSBsYWJlbDogc3RyaW5nO1xuICBASW5wdXQoKSByZXF1aXJlZCA9IGZhbHNlO1xuICBASW5wdXQoKSByZWFkb25seSA9IGZhbHNlO1xuICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xuICBASW5wdXQoKSBtaW5EYXRlVmFsdWU6IERhdGU7XG4gIEBJbnB1dCgpIG1heERhdGVWYWx1ZTogRGF0ZTtcbiAgQElucHV0KCkgc2hvd1RpbWUgPSBmYWxzZTtcbiAgQElucHV0KCkgaGVscFRleHQgPSAnJztcbiAgQElucHV0KCkgc2hvd0NoZWNrYm94ID0gZmFsc2U7XG4gIEBJbnB1dCgpIGNoZWNrYm94TW9kZWwgPSBmYWxzZTtcbiAgQElucHV0KCkgY2hlY2tib3hMYWJlbDogc3RyaW5nO1xuICBASW5wdXQoKSBkaXNhYmxlRGF0ZU9uQ2hlY2sgPSBmYWxzZTtcbiAgQElucHV0KCkgc2V0IGVycm9ycyhlcnJvcnM6IHN0cmluZyB8IEFycmF5PHN0cmluZz4pIHtcbiAgICBpZiAoIWVycm9ycykge1xuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YoZXJyb3JzKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBbZXJyb3JzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lcnJvciA9IGVycm9ycztcbiAgICB9XG4gIH1cblxuICBAT3V0cHV0KCkgbmdNb2RlbENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8RGF0ZT4oKTtcbiAgQE91dHB1dCgpIGNoZWNrYm94VmFsdWVDaGFuZ2VkOiBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgbW9kZWxEYXRlOiBEYXRlO1xuICBmcjogYW55O1xuICBkaXNhYmxlRGF0ZUZyb21DaGVjazogYm9vbGVhbjtcbiAgeWVhclJhbmdlTWluID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC0gMTAwO1xuICB5ZWFyUmFuZ2VNYXggPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgKyAzO1xuICBndWlkID0gZ2VuZXJhdGVHdWlkKCk7XG4gIGVycm9yID0gbnVsbDtcblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmRpc2FibGVEYXRlRnJvbUNoZWNrID0gKHRoaXMuY2hlY2tib3hNb2RlbCAmJiB0aGlzLmRpc2FibGVEYXRlT25DaGVjaykgPyB0cnVlIDogZmFsc2U7XG4gICAgdGhpcy5mciA9IHtcbiAgICAgIGZpcnN0RGF5T2ZXZWVrOiAxLFxuICAgICAgZGF5TmFtZXM6IFsnRGltYW5jaGUnLCAnTHVuZGknLCAnTWFyZGknLCAnTWVyY3JlZGknLCAnSmV1ZGknLCAnVmVuZHJlZGknLCAnU2FtZWRpJ10sXG4gICAgICBkYXlOYW1lc1Nob3J0OiBbJ0RpbScsICdMdW4nLCAnTWFyJywgJ01lcicsICdKZXUnLCAnVmVuJywgJ1NhbSddLFxuICAgICAgZGF5TmFtZXNNaW46IFsnRGknLCAnTHUnLCAnTWEnLCAnTWUnLCAnSmUnLCAnVmUnLCAnU2EnXSxcbiAgICAgIG1vbnRoTmFtZXM6IFtcbiAgICAgICAgJ0phbnZpZXInLCAnRsOpdnJpZXInLCAnTWFycycsICdBdnJpbCcsICdNYWknLCAnSnVpbicsICdKdWlsbGV0JyxcbiAgICAgICAgJ0Fvw7t0JywgJ1NlcHRlbWJyZScsICdPY3RvYnJlJywgJ05vdmVtYnJlJywgJ0TDqWNlbWJyZSddLFxuICAgICAgbW9udGhOYW1lc1Nob3J0OiBbJ0phbicsICdGw6l2JywgJ01hcicsICdBdnInLCAnTWFpJywgJ0p1bicsICdKdWwnLCAnQW/DuycsICdTZXQnLCAnT2N0JywgJ05vdicsICdEw6ljJ10sXG4gICAgICB0b2RheTogYEF1am91cmQnaHVpYCxcbiAgICAgIGNsZWFyOiAnQW5udWxlcicsXG4gICAgICBkYXRlRm9ybWF0OiAnZGQvbW0veXknLFxuICAgICAgd2Vla0hlYWRlcjogJ1NlbSdcbiAgICB9O1xuICB9XG5cbiAgY2hlY2tib3hDaGFuZ2VkKGV2ZW50OiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5jaGVja2JveFZhbHVlQ2hhbmdlZC5lbWl0KGV2ZW50KTtcbiAgICBpZiAoZXZlbnQgPT09IHRydWUgJiYgdGhpcy5kaXNhYmxlRGF0ZU9uQ2hlY2spIHtcbiAgICAgIHRoaXMubW9kZWxEYXRlID0gbnVsbDtcbiAgICAgIHRoaXMuZGlzYWJsZURhdGVGcm9tQ2hlY2sgPSB0cnVlO1xuICAgICAgdGhpcy5uZ01vZGVsQ2hhbmdlLmVtaXQodGhpcy5tb2RlbERhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGVEYXRlRnJvbUNoZWNrID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgb25EYXRlQ2hhbmdlKGRhdGU6IERhdGUpOiB2b2lkIHtcbiAgICBpZiAoIWRhdGUgfHwgdGhpcy5zaG93VGltZSkge1xuICAgICAgdGhpcy5uZ01vZGVsQ2hhbmdlLmVtaXQoZGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHV0Y0RhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQyhkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkpKTtcbiAgICAgIHRoaXMubmdNb2RlbENoYW5nZS5lbWl0KHV0Y0RhdGUpO1xuICAgIH1cbiAgfVxufVxuIl19