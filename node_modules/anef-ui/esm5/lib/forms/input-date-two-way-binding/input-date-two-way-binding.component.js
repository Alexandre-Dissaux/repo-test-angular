/**
 * @fileoverview added by tsickle
 * Generated from: lib/forms/input-date-two-way-binding/input-date-two-way-binding.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { generateGuid } from '../../shared/guid';
var InputDateTwoWayBindingComponent = /** @class */ (function () {
    function InputDateTwoWayBindingComponent() {
        this.required = false;
        this.readonly = false;
        this.disabled = false;
        this.showTime = false;
        this.helpText = '';
        this.showCheckbox = false;
        this.checkboxModel = false;
        this.disableDateOnCheck = false;
        this.ngModelChange = new EventEmitter();
        this.checkboxValueChanged = new EventEmitter();
        this.yearRangeMin = new Date().getFullYear() - 100;
        this.yearRangeMax = new Date().getFullYear() + 3;
        this.guid = generateGuid();
        this.error = null;
    }
    Object.defineProperty(InputDateTwoWayBindingComponent.prototype, "model", {
        set: /**
         * @param {?} model
         * @return {?}
         */
        function (model) {
            if (typeof model === 'string') {
                if (!model || this.showTime) {
                    this.modelDate = new Date(model);
                }
                else {
                    model = new Date(model);
                    this.modelDate = new Date(model.getUTCFullYear(), model.getUTCMonth(), model.getUTCDate());
                }
            }
            else {
                if (!model || this.showTime) {
                    this.modelDate = model;
                }
                else {
                    this.modelDate = new Date(model.getUTCFullYear(), model.getUTCMonth(), model.getUTCDate());
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputDateTwoWayBindingComponent.prototype, "errors", {
        set: /**
         * @param {?} errors
         * @return {?}
         */
        function (errors) {
            if (!errors) {
                this.error = null;
            }
            else if (typeof (errors) === 'string') {
                this.error = [errors];
            }
            else {
                this.error = errors;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    InputDateTwoWayBindingComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.disableDateFromCheck = (this.checkboxModel && this.disableDateOnCheck) ? true : false;
        this.fr = {
            firstDayOfWeek: 1,
            dayNames: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],
            dayNamesShort: ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'],
            dayNamesMin: ['Di', 'Lu', 'Ma', 'Me', 'Je', 'Ve', 'Sa'],
            monthNames: [
                'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet',
                'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'
            ],
            monthNamesShort: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun', 'Jul', 'Aoû', 'Set', 'Oct', 'Nov', 'Déc'],
            today: "Aujourd'hui",
            clear: 'Annuler',
            dateFormat: 'dd/mm/yy',
            weekHeader: 'Sem'
        };
    };
    /**
     * @param {?} event
     * @return {?}
     */
    InputDateTwoWayBindingComponent.prototype.checkboxChanged = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.checkboxValueChanged.emit(event);
        if (event === true && this.disableDateOnCheck) {
            this.modelDate = null;
            this.disableDateFromCheck = true;
            this.ngModelChange.emit(this.modelDate);
        }
        else {
            this.disableDateFromCheck = false;
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    InputDateTwoWayBindingComponent.prototype.onDateChange = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        if (!date || this.showTime) {
            this.ngModelChange.emit(date);
        }
        else {
            /** @type {?} */
            var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
            this.ngModelChange.emit(utcDate);
        }
    };
    InputDateTwoWayBindingComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line: component-selector
                    selector: 'anef-input-date-two-way-binding',
                    template: "<div class=\"p-grid nogutter\">\n  <div class=\"p-col-12\">\n    <label *ngIf=\"label\" for=\"{{guid}}\">\n      {{label}} <span *ngIf=\"required && !(readonly || disabled)\" class=\"redish\">*</span> :\n      <button *ngIf=\"helpText\" class=\"help-button\" title=\"{{helpText}}\">\n        <i class=\"fa fa-question-circle fa-lg\"></i>\n      </button>\n    </label>\n\n    <div class=\"input\">\n      <div *ngIf=\"!readonly; else textual\" class=\"ui-inputgroup\">\n        <p-calendar\n          (ngModelChange)=\"onDateChange($event)\"\n          [(ngModel)]=\"modelDate\"\n          [disabled]=\"disabled || disableDateFromCheck\"\n          [inputId]=\"guid\"\n          [locale]=\"fr\"\n          [maxDate]=\"maxDateValue\"\n          [minDate]=\"minDateValue\"\n          [monthNavigator]=\"true\"\n          [ngClass]=\"{'error': error && error.length}\"\n          [readonlyInput]=\"readonly\"\n          [required]=\"required\"\n          [showIcon]=\"true\"\n          [showTime]=\"showTime\"\n          [yearNavigator]=\"true\"\n          appendTo=\"body\"\n          dateFormat=\"dd/mm/yy\"\n          hourFormat=\"24\"\n          name=\"{{guid}}\"\n          yearRange=\"{{yearRangeMin}}:{{yearRangeMax}}\">\n        </p-calendar>\n        <span\n          *ngIf=\"showCheckbox\"\n          class=\"ui-inputgroup-addon checkbox\"\n          id=\"custom-span-checkbox\"\n        >\n          <p-checkbox\n            (onChange)=\"checkboxChanged($event)\"\n            [(ngModel)]=\"checkboxModel\"\n            binary=\"true\">\n          </p-checkbox>\n        </span>\n        <span\n          *ngIf=\"showCheckbox\"\n          class=\"ui-inputgroup-addon label\">\n          {{checkboxLabel}}\n        </span>\n      </div>\n\n      <ng-template #textual>\n        <div class=\"textual\">\n          <span *ngIf=\"!showTime\">\n            {{ (modelDate !== null) ? (modelDate | date: 'dd/MM/yyyy') : '-' }}\n          </span>\n          <span *ngIf=\"showTime\">\n            {{ (modelDate !== null) ? (modelDate | date: 'dd/MM/yyyy \u00E0 HH:mm') : '-' }}\n          </span>\n          <span *ngIf=\"showCheckbox && checkboxModel\" class=\"textual-checkboxLabel\">\n            {{checkboxLabel}}\n          </span>\n        </div>\n      </ng-template>\n    </div>\n\n    <div *ngIf=\"error && error.length\" class=\"error redish\">\n      <div *ngFor=\"let errorLine of error\">\n        <p>\n          <i class=\"pi pi-info-circle\"></i>\n          <span>{{errorLine}}</span>\n        </p>\n      </div>\n    </div>\n\n  </div>\n</div>\n",
                    styles: ["p-calendar{margin-top:-.5rem}label{color:#656565;font-size:1.4rem}.help-button{border:none;background-color:#fff;color:#256cb9}.ui-inputgroup-addon.label{padding:.8rem 1rem 0;text-align:left;color:#271519;background:0 0;border:none;line-height:22px}.ui-inputgroup-addon.checkbox{line-height:3rem;background:0 0;border-right:none;border-top:none;border-bottom:none;padding:0 0 0 1rem}.textual-checkboxLabel{padding-left:1rem}#custom-span-checkbox{border-left:none;line-height:2.9rem}.textual{margin-top:7px}"]
                }] }
    ];
    InputDateTwoWayBindingComponent.propDecorators = {
        model: [{ type: Input }],
        label: [{ type: Input }],
        required: [{ type: Input }],
        readonly: [{ type: Input }],
        disabled: [{ type: Input }],
        minDateValue: [{ type: Input }],
        maxDateValue: [{ type: Input }],
        showTime: [{ type: Input }],
        helpText: [{ type: Input }],
        showCheckbox: [{ type: Input }],
        checkboxModel: [{ type: Input }],
        checkboxLabel: [{ type: Input }],
        disableDateOnCheck: [{ type: Input }],
        errors: [{ type: Input }],
        ngModelChange: [{ type: Output }],
        checkboxValueChanged: [{ type: Output }]
    };
    return InputDateTwoWayBindingComponent;
}());
export { InputDateTwoWayBindingComponent };
if (false) {
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.label;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.required;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.readonly;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.disabled;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.minDateValue;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.maxDateValue;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.showTime;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.helpText;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.showCheckbox;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.checkboxModel;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.checkboxLabel;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.disableDateOnCheck;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.ngModelChange;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.checkboxValueChanged;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.modelDate;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.fr;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.disableDateFromCheck;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.yearRangeMin;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.yearRangeMax;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.guid;
    /** @type {?} */
    InputDateTwoWayBindingComponent.prototype.error;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtZGF0ZS10d28td2F5LWJpbmRpbmcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5lZi11aS8iLCJzb3VyY2VzIjpbImxpYi9mb3Jtcy9pbnB1dC1kYXRlLXR3by13YXktYmluZGluZy9pbnB1dC1kYXRlLXR3by13YXktYmluZGluZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQy9FLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVqRDtJQUFBO1FBd0JXLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBR2pCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBRXRCLHVCQUFrQixHQUFHLEtBQUssQ0FBQztRQVcxQixrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFDekMseUJBQW9CLEdBQTBCLElBQUksWUFBWSxFQUFFLENBQUM7UUFLM0UsaUJBQVksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxHQUFHLEdBQUcsQ0FBQztRQUM5QyxpQkFBWSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVDLFNBQUksR0FBRyxZQUFZLEVBQUUsQ0FBQztRQUN0QixVQUFLLEdBQUcsSUFBSSxDQUFDO0lBdUNmLENBQUM7SUF0RkMsc0JBQWEsa0RBQUs7Ozs7O1FBQWxCLFVBQW1CLEtBQW9CO1lBQ3JDLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFO2dCQUM3QixJQUFJ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NUIsdURBQTRCOztJQUM1QixtREFBMEI7O0lBQzFCLG1EQUF1Qjs7SUFDdkIsdURBQThCOztJQUM5Qix3REFBK0I7O0lBQy9CLHdEQUErQjs7SUFDL0IsNkRBQW9DOztJQVdwQyx3REFBbUQ7O0lBQ25ELCtEQUEyRTs7SUFFM0Usb0RBQWdCOztJQUNoQiw2Q0FBUTs7SUFDUiwrREFBOEI7O0lBQzlCLHVEQUE4Qzs7SUFDOUMsdURBQTRDOztJQUM1QywrQ0FBc0I7O0lBQ3RCLGdEQUFhIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgZ2VuZXJhdGVHdWlkIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2d1aWQnO1xuXG5AQ29tcG9uZW50KHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICdhbmVmLWlucHV0LWRhdGUtdHdvLXdheS1iaW5kaW5nJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2lucHV0LWRhdGUtdHdvLXdheS1iaW5kaW5nLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vaW5wdXQtZGF0ZS10d28td2F5LWJpbmRpbmcuY29tcG9uZW50LnNjc3MnXSxcbn0pXG5leHBvcnQgY2xhc3MgSW5wdXREYXRlVHdvV2F5QmluZGluZ0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpIHNldCBtb2RlbChtb2RlbDogRGF0ZSB8IHN0cmluZykge1xuICAgIGlmICh0eXBlb2YgbW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoIW1vZGVsIHx8IHRoaXMuc2hvd1RpbWUpIHtcbiAgICAgICAgdGhpcy5tb2RlbERhdGUgPSBuZXcgRGF0ZShtb2RlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb2RlbCA9IG5ldyBEYXRlKG1vZGVsKTtcbiAgICAgICAgdGhpcy5tb2RlbERhdGUgPSBuZXcgRGF0ZShtb2RlbC5nZXRVVENGdWxsWWVhcigpLCBtb2RlbC5nZXRVVENNb250aCgpLCBtb2RlbC5nZXRVVENEYXRlKCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIW1vZGVsIHx8IHRoaXMuc2hvd1RpbWUpIHtcbiAgICAgICAgdGhpcy5tb2RlbERhdGUgPSBtb2RlbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubW9kZWxEYXRlID0gbmV3IERhdGUobW9kZWwuZ2V0VVRDRnVsbFllYXIoKSwgbW9kZWwuZ2V0VVRDTW9udGgoKSwgbW9kZWwuZ2V0VVRDRGF0ZSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgQElucHV0KCkgbGFiZWw6IHN0cmluZztcbiAgQElucHV0KCkgcmVxdWlyZWQgPSBmYWxzZTtcbiAgQElucHV0KCkgcmVhZG9ubHkgPSBmYWxzZTtcbiAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcbiAgQElucHV0KCkgbWluRGF0ZVZhbHVlOiBEYXRlO1xuICBASW5wdXQoKSBtYXhEYXRlVmFsdWU6IERhdGU7XG4gIEBJbnB1dCgpIHNob3dUaW1lID0gZmFsc2U7XG4gIEBJbnB1dCgpIGhlbHBUZXh0ID0gJyc7XG4gIEBJbnB1dCgpIHNob3dDaGVja2JveCA9IGZhbHNlO1xuICBASW5wdXQoKSBjaGVja2JveE1vZGVsID0gZmFsc2U7XG4gIEBJbnB1dCgpIGNoZWNrYm94TGFiZWw6IHN0cmluZztcbiAgQElucHV0KCkgZGlzYWJsZURhdGVPbkNoZWNrID0gZmFsc2U7XG4gIEBJbnB1dCgpIHNldCBlcnJvcnMoZXJyb3JzOiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+KSB7XG4gICAgaWYgKCFlcnJvcnMpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mKGVycm9ycykgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmVycm9yID0gW2Vycm9yc107XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcnM7XG4gICAgfVxuICB9XG5cbiAgQE91dHB1dCgpIG5nTW9kZWxDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPERhdGU+KCk7XG4gIEBPdXRwdXQoKSBjaGVja2JveFZhbHVlQ2hhbmdlZDogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIG1vZGVsRGF0ZTogRGF0ZTtcbiAgZnI6IGFueTtcbiAgZGlzYWJsZURhdGVGcm9tQ2hlY2s6IGJvb2xlYW47XG4gIHllYXJSYW5nZU1pbiA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAtIDEwMDtcbiAgeWVhclJhbmdlTWF4ID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICsgMztcbiAgZ3VpZCA9IGdlbmVyYXRlR3VpZCgpO1xuICBlcnJvciA9IG51bGw7XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5kaXNhYmxlRGF0ZUZyb21DaGVjayA9ICh0aGlzLmNoZWNrYm94TW9kZWwgJiYgdGhpcy5kaXNhYmxlRGF0ZU9uQ2hlY2spID8gdHJ1ZSA6IGZhbHNlO1xuICAgIHRoaXMuZnIgPSB7XG4gICAgICBmaXJzdERheU9mV2VlazogMSxcbiAgICAgIGRheU5hbWVzOiBbJ0RpbWFuY2hlJywgJ0x1bmRpJywgJ01hcmRpJywgJ01lcmNyZWRpJywgJ0pldWRpJywgJ1ZlbmRyZWRpJywgJ1NhbWVkaSddLFxuICAgICAgZGF5TmFtZXNTaG9ydDogWydEaW0nLCAnTHVuJywgJ01hcicsICdNZXInLCAnSmV1JywgJ1ZlbicsICdTYW0nXSxcbiAgICAgIGRheU5hbWVzTWluOiBbJ0RpJywgJ0x1JywgJ01hJywgJ01lJywgJ0plJywgJ1ZlJywgJ1NhJ10sXG4gICAgICBtb250aE5hbWVzOiBbXG4gICAgICAgICdKYW52aWVyJywgJ0bDqXZyaWVyJywgJ01hcnMnLCAnQXZyaWwnLCAnTWFpJywgJ0p1aW4nLCAnSnVpbGxldCcsXG4gICAgICAgICdBb8O7dCcsICdTZXB0ZW1icmUnLCAnT2N0b2JyZScsICdOb3ZlbWJyZScsICdEw6ljZW1icmUnXSxcbiAgICAgIG1vbnRoTmFtZXNTaG9ydDogWydKYW4nLCAnRsOpdicsICdNYXInLCAnQXZyJywgJ01haScsICdKdW4nLCAnSnVsJywgJ0Fvw7snLCAnU2V0JywgJ09jdCcsICdOb3YnLCAnRMOpYyddLFxuICAgICAgdG9kYXk6IGBBdWpvdXJkJ2h1aWAsXG4gICAgICBjbGVhcjogJ0FubnVsZXInLFxuICAgICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICAgIHdlZWtIZWFkZXI6ICdTZW0nXG4gICAgfTtcbiAgfVxuXG4gIGNoZWNrYm94Q2hhbmdlZChldmVudDogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuY2hlY2tib3hWYWx1ZUNoYW5nZWQuZW1pdChldmVudCk7XG4gICAgaWYgKGV2ZW50ID09PSB0cnVlICYmIHRoaXMuZGlzYWJsZURhdGVPbkNoZWNrKSB7XG4gICAgICB0aGlzLm1vZGVsRGF0ZSA9IG51bGw7XG4gICAgICB0aGlzLmRpc2FibGVEYXRlRnJvbUNoZWNrID0gdHJ1ZTtcbiAgICAgIHRoaXMubmdNb2RlbENoYW5nZS5lbWl0KHRoaXMubW9kZWxEYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlRGF0ZUZyb21DaGVjayA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG9uRGF0ZUNoYW5nZShkYXRlOiBEYXRlKTogdm9pZCB7XG4gICAgaWYgKCFkYXRlIHx8IHRoaXMuc2hvd1RpbWUpIHtcbiAgICAgIHRoaXMubmdNb2RlbENoYW5nZS5lbWl0KGRhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB1dGNEYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpKSk7XG4gICAgICB0aGlzLm5nTW9kZWxDaGFuZ2UuZW1pdCh1dGNEYXRlKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==