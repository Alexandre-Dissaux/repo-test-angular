/**
 * @fileoverview added by tsickle
 * Generated from: lib/forms/input-date/input-date.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
// Angular
import { Component, Input } from '@angular/core';
import { FormGroup } from '@angular/forms';
import { merge, Subject } from 'rxjs';
import { debounceTime, takeUntil } from 'rxjs/operators';
import moment from 'moment';
var InputDateComponent = /** @class */ (function () {
    function InputDateComponent() {
        this.notifier = new Subject();
        this.unknownMonthItem = { label: 'Inconnu', value: 'i' };
        this.required = false;
        this.readonly = false;
        this.defaultDisplay = 'N/A';
        this.dayLabel = 'Jour';
        this.dayPlaceholder = 'JJ';
        this.monthLabel = 'Mois';
        this.monthPlaceholder = 'MM';
        this.yearLabel = 'Année';
        this.yearPlaceholder = 'AAAA';
        this.monthOptions = [
            { label: 'Janvier', value: 1 },
            { label: 'Février', value: 2 },
            { label: 'Mars', value: 3 },
            { label: 'Avril', value: 4 },
            { label: 'Mai', value: 5 },
            { label: 'Juin', value: 6 },
            { label: 'Juillet', value: 7 },
            { label: 'Août', value: 8 },
            { label: 'Septembre', value: 9 },
            { label: 'Octobre', value: 10 },
            { label: 'Novembre', value: 11 },
            { label: 'Décembre', value: 12 }
        ];
        this.messages = {
            day: {
                required: 'Le jour est requis',
                pattern: 'Le jour doit être un nombre',
                length: 'Le jour doit contenir 2 chiffres au maximum',
                minMax: 'Le jour doit être compris entre 1 et 31'
            },
            month: {
                required: 'Le mois est requis'
            },
            year: {
                required: 'L\'année est requise',
                pattern: 'L\'année doit être un nombre',
                length: 'L\'année doit contenir 4 chiffres'
            },
            invalid: 'La date est invalide'
        };
    }
    /**
     * @return {?}
     */
    InputDateComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var dayChanges = this.formGroup.get(this.dayName).valueChanges;
        /** @type {?} */
        var monthChanges = this.formGroup.get(this.monthName).valueChanges;
        /** @type {?} */
        var yearChanges = this.formGroup.get(this.yearName).valueChanges;
        this.dateChanges = merge(dayChanges, monthChanges, yearChanges);
        this.dateValidityChange();
    };
    /**
     * @return {?}
     */
    InputDateComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.notifier.next();
        this.notifier.unsubscribe();
    };
    /**
     * @return {?}
     */
    InputDateComponent.prototype.formContainsErrors = /**
     * @return {?}
     */
    function () {
        return (this.controlContainsErrors(this.dayName) ||
            this.controlContainsErrors(this.monthName) ||
            this.controlContainsErrors(this.yearName));
    };
    /**
     * @param {?} controlName
     * @return {?}
     */
    InputDateComponent.prototype.controlContainsErrors = /**
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.formGroup && (this.formGroup.controls[controlName].errors !== null && this.formGroup.controls[controlName].dirty);
    };
    /**
     * @param {?} controlName
     * @return {?}
     */
    InputDateComponent.prototype.hasPatternError = /**
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) && this.formGroup.controls[controlName].errors.pattern;
    };
    /**
     * @param {?} controlName
     * @return {?}
     */
    InputDateComponent.prototype.hasMinMaxError = /**
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) &&
            (this.formGroup.controls[controlName].errors.min || this.formGroup.controls[controlName].errors.max);
    };
    /**
     * @param {?} controlName
     * @return {?}
     */
    InputDateComponent.prototype.hasLengthError = /**
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) &&
            (this.formGroup.controls[controlName].errors.minlength || this.formGroup.controls[controlName].errors.maxlength);
    };
    /**
     * @param {?} controlName
     * @return {?}
     */
    InputDateComponent.prototype.hasRequiredError = /**
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) && this.formGroup.controls[controlName].errors.required;
    };
    /**
     * @param {?} controlName
     * @return {?}
     */
    InputDateComponent.prototype.hasInvalidDateError = /**
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) && this.formGroup.controls[controlName].errors.invalidDate;
    };
    /**
     * @return {?}
     */
    InputDateComponent.prototype.dateValidityChange = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.dateChanges.pipe(debounceTime(200), takeUntil(this.notifier)).subscribe((/**
         * @return {?}
         */
        function () {
            _this.resetErrors();
            /** @type {?} */
            var day = Number(_this.formGroup.get(_this.dayName).value);
            /** @type {?} */
            var month = _this.formGroup.get(_this.monthName).value - 1;
            /** @type {?} */
            var year = Number(_this.formGroup.get(_this.yearName).value);
            _this.checkDateValidity(day, month, year);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    InputDateComponent.prototype.getFields = /**
     * @private
     * @return {?}
     */
    function () {
        return { day: this.formGroup.get(this.dayName).value, month: this.getMonthValue(true), year: this.formGroup.get(this.yearName).value };
    };
    /*** Returns FormGroup month field value */
    /**
     * Returns FormGroup month field value
     * @private
     * @param {?=} correctForMoment
     * @return {?}
     */
    InputDateComponent.prototype.getMonthValue = /**
     * Returns FormGroup month field value
     * @private
     * @param {?=} correctForMoment
     * @return {?}
     */
    function (correctForMoment) {
        /** @type {?} */
        var value = this.formGroup.get(this.monthName).value;
        if (value === this.unknownMonthItem.value) {
            value = 1;
        }
        if (correctForMoment) {
            return value - 1;
        }
        return value;
    };
    /**
     * @return {?}
     */
    InputDateComponent.prototype.areFieldsFilled = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var fields = this.getFields();
        return fields.day != null && fields.month != -1 && fields.year != null;
    };
    /**
     * @param {?} day
     * @param {?} month
     * @param {?} year
     * @return {?}
     */
    InputDateComponent.prototype.checkDateValidity = /**
     * @param {?} day
     * @param {?} month
     * @param {?} year
     * @return {?}
     */
    function (day, month, year) {
        /** @type {?} */
        var fields = this.getFields();
        if (this.areFieldsFilled() && !moment([year, month, day]).isValid()) {
            this.formGroup.get(this.yearName).setErrors({ invalidDate: true }, { emitEvent: true });
            this.formGroup.get(this.monthName).setErrors({ invalidDate: true }, { emitEvent: true });
            this.formGroup.get(this.dayName).setErrors({ invalidDate: true }, { emitEvent: true });
            this.formGroup.setErrors({ invalidDate: true }, { emitEvent: true });
            if ((this.required || this.yearRequired) && this.areFieldsFilled()) {
                return { invalidDate: true };
            }
        }
        if (moment([fields.year, fields.month, fields.day]).isValid()) {
            this.formGroup.setErrors(null);
            this.formGroup.get(this.yearName).setErrors(null);
            this.formGroup.get(this.monthName).setErrors(null);
            this.formGroup.get(this.dayName).setErrors(null);
        }
        return null;
    };
    /**
     * @private
     * @return {?}
     */
    InputDateComponent.prototype.resetErrors = /**
     * @private
     * @return {?}
     */
    function () {
        this.formGroup.get(this.dayName).setErrors(null);
        this.formGroup.get(this.monthName).setErrors(null);
        this.formGroup.get(this.yearName).setErrors(null);
    };
    /**
     * @return {?}
     */
    InputDateComponent.prototype.toString = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var result = '';
        /** @type {?} */
        var day = Number(this.formGroup.get(this.dayName).value);
        result += day ? ('0' + day).slice(-2) + '/' : '';
        /** @type {?} */
        var month = Number(this.formGroup.get(this.monthName).value);
        result += month ? ('0' + month).slice(-2) + '/' : '';
        /** @type {?} */
        var year = Number(this.formGroup.get(this.yearName).value);
        result += year;
        return result === '0' ? this.defaultDisplay : result;
    };
    InputDateComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line: component-selector
                    selector: 'anef-input-date',
                    template: "<div class=\"p-grid nogutter\" [formGroup]=\"formGroup\">\n  <div class=\"p-col-12\">\n    <fieldset>\n      <legend *ngIf=\"label\">\n        {{ label }} <span class=\"redish\" *ngIf=\"required\">*</span> :\n      </legend>\n\n      <ng-content select=\"[sub-label]\"></ng-content>\n\n      <div *ngIf=\"!readonly; else textual\" class=\"p-grid\">\n        <div class=\"p-col-12 p-md-2\">\n          <div class=\"p-grid nogutter\">\n            <div class=\"p-col-12\">\n              <label id=\"dayHelpBlock\">{{ dayLabel }} :\n              </label>\n              <input pInputText [id]=\"dayName\" [name]=\"dayName\" type=\"text\" class=\"day\"\n                     placeholder=\"{{ dayPlaceholder}}\" aria-describedby=\"dayHelpBlock\"\n                     [formControlName]=\"dayName\" pattern=\"[0-9]{0,2}\" maxlength=\"2\">\n            </div>\n          </div>\n        </div>\n        <div class=\"p-col-12 p-md-6\">\n          <div class=\"p-grid nogutter\">\n            <div class=\"p-col-12\">\n              <label id=\"monthHelpBlock\">{{ monthLabel }} :\n              </label>\n              <p-dropdown class=\"month-dropdown\" [id]=\"monthName\" [name]=\"monthName\" aria-describedby=\"monthHelpBlock\"\n                          [placeholder]=monthPlaceholder [options]=monthOptions\n                          [formControlName]=\"monthName\">\n              </p-dropdown>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"p-col-12 p-md-4\">\n          <div class=\"p-grid nogutter\">\n            <div class=\"p-col-12\">\n              <label id=\"yearHelpBlock\">{{ yearLabel}}\n                <span class=\"redish\" *ngIf=\"yearRequired\"> *</span> :\n              </label>\n              <input pInputText [id]=\"yearName\" [name]=\"yearName\" type=\"text\" placeholder=\"{{ yearPlaceholder }}\"\n                     pattern=\"[0-9]{0,4}\" minlength=\"4\" maxlength=\"4\"\n                     aria-describedby=\"yearHelpBlock\" [formControlName]=\"yearName\">\n            </div>\n          </div>\n        </div>\n      </div>\n      <ng-template #textual>\n        <span class=\"textual\">{{toString()}}</span>\n      </ng-template>\n\n      <ng-content select=\"[complement]\"></ng-content>\n\n      <div class=\"redish errors\" *ngIf=\"formContainsErrors()\">\n        <div *ngIf=\"controlContainsErrors(dayName)\">\n          <div *ngIf=\"hasPatternError(dayName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.day.pattern}}\n            </span>\n          </div>\n          <div *ngIf=\"hasMinMaxError(dayName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.day.minMax}}\n            </span>\n          </div>\n          <div *ngIf=\"hasLengthError(dayName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.day.length}}\n            </span>\n          </div>\n          <div *ngIf=\"hasRequiredError(dayName) && !hasPatternError(dayName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.day.required}}\n            </span>\n          </div>\n        </div>\n        <div *ngIf=\"controlContainsErrors(monthName)\">\n          <div *ngIf=\"hasRequiredError(monthName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.month.required}}\n            </span>\n          </div>\n        </div>\n        <div *ngIf=\"controlContainsErrors(yearName)\">\n          <div *ngIf=\"hasPatternError(yearName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.year.pattern}}\n            </span>\n          </div>\n          <div *ngIf=\"hasLengthError(yearName) && !hasPatternError(yearName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.year.length}}\n            </span>\n          </div>\n          <div *ngIf=\"hasRequiredError(yearName) && !hasPatternError(yearName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.year.required}}\n            </span>\n          </div>\n        </div>\n\n        <div *ngIf=\"hasInvalidDateError(dayName) || hasInvalidDateError(monthName) || hasInvalidDateError(yearName)\"><i\n          class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n          <span>\n              {{messages.invalid}}\n          </span>\n        </div>\n\n        <ng-content select=\"[messages]\"></ng-content>\n      </div>\n    </fieldset>\n  </div>\n</div>\n",
                    styles: [".textual{display:block}.day{padding-left:1rem;padding-right:1rem;min-width:4rem}#dayHelpBlock{white-space:nowrap}fieldset{border-color:transparent;border-width:0;padding:0}legend{-webkit-padding-start:0;padding-inline-start:0;padding-bottom:1rem}.p-grid label{margin:0;color:#656565}body .ui-dropdown-panel .ui-dropdown-items .ui-dropdown-item span:first{color:#656565}::-webkit-input-placeholder{color:#111}:-moz-placeholder{color:#111}::-moz-placeholder{color:#111}:-ms-input-placeholder{color:#111}"]
                }] }
    ];
    /** @nocollapse */
    InputDateComponent.ctorParameters = function () { return []; };
    InputDateComponent.propDecorators = {
        formGroup: [{ type: Input }],
        label: [{ type: Input }],
        required: [{ type: Input }],
        readonly: [{ type: Input }],
        defaultDisplay: [{ type: Input }],
        dayName: [{ type: Input }],
        dayLabel: [{ type: Input }],
        dayPlaceholder: [{ type: Input }],
        monthName: [{ type: Input }],
        monthLabel: [{ type: Input }],
        monthPlaceholder: [{ type: Input }],
        yearName: [{ type: Input }],
        yearRequired: [{ type: Input }],
        yearLabel: [{ type: Input }],
        yearPlaceholder: [{ type: Input }],
        model: [{ type: Input }],
        monthOptions: [{ type: Input }],
        messages: [{ type: Input }]
    };
    return InputDateComponent;
}());
export { InputDateComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    InputDateComponent.prototype.notifier;
    /**
     * @type {?}
     * @private
     */
    InputDateComponent.prototype.dateChanges;
    /**
     * @type {?}
     * @private
     */
    InputDateComponent.prototype.unknownMonthItem;
    /** @type {?} */
    InputDateComponent.prototype.formGroup;
    /** @type {?} */
    InputDateComponent.prototype.label;
    /** @type {?} */
    InputDateComponent.prototype.required;
    /** @type {?} */
    InputDateComponent.prototype.readonly;
    /** @type {?} */
    InputDateComponent.prototype.defaultDisplay;
    /** @type {?} */
    InputDateComponent.prototype.dayName;
    /** @type {?} */
    InputDateComponent.prototype.dayLabel;
    /** @type {?} */
    InputDateComponent.prototype.dayPlaceholder;
    /** @type {?} */
    InputDateComponent.prototype.monthName;
    /** @type {?} */
    InputDateComponent.prototype.monthLabel;
    /** @type {?} */
    InputDateComponent.prototype.monthPlaceholder;
    /** @type {?} */
    InputDateComponent.prototype.yearName;
    /** @type {?} */
    InputDateComponent.prototype.yearRequired;
    /** @type {?} */
    InputDateComponent.prototype.yearLabel;
    /** @type {?} */
    InputDateComponent.prototype.yearPlaceholder;
    /** @type {?} */
    InputDateComponent.prototype.model;
    /** @type {?} */
    InputDateComponent.prototype.monthOptions;
    /** @type {?} */
    InputDateComponent.prototype.messages;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtZGF0ZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmVmLXVpLyIsInNvdXJjZXMiOlsibGliL2Zvcm1zL2lucHV0LWRhdGUvaW5wdXQtZGF0ZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQXFCLE1BQU0sZUFBZSxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUczQyxPQUFPLEVBQUUsS0FBSyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNsRCxPQUFPLEVBQVUsWUFBWSxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2pFLE9BQU8sTUFBTSxNQUFNLFFBQVEsQ0FBQztBQUU1QjtJQTJERTtRQXBEUSxhQUFRLEdBQWlCLElBQUksT0FBTyxFQUFFLENBQUM7UUFFdkMscUJBQWdCLEdBQUcsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUMsQ0FBQztRQUdqRCxhQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsbUJBQWMsR0FBRyxLQUFLLENBQUM7UUFHdkIsYUFBUSxHQUFHLE1BQU0sQ0FBQztRQUNsQixtQkFBYyxHQUFHLElBQUksQ0FBQztRQUV0QixlQUFVLEdBQUcsTUFBTSxDQUFDO1FBQ3BCLHFCQUFnQixHQUFHLElBQUksQ0FBQztRQUd4QixjQUFTLEdBQUcsT0FBTyxDQUFDO1FBQ3BCLG9CQUFlLEdBQUcsTUFBTSxDQUFDO1FBRXpCLGlCQUFZLEdBQWlCO1lBQ3BDLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO1lBQzlCLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO1lBQzlCLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxL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LEtBQUs7aUNBQ0wsS0FBSzswQkFFTCxLQUFLOzJCQUNMLEtBQUs7aUNBQ0wsS0FBSzs0QkFDTCxLQUFLOzZCQUNMLEtBQUs7bUNBQ0wsS0FBSzsyQkFDTCxLQUFLOytCQUNMLEtBQUs7NEJBQ0wsS0FBSztrQ0FDTCxLQUFLO3dCQUNMLEtBQUs7K0JBQ0wsS0FBSzsyQkFjTCxLQUFLOztJQTJJUix5QkFBQztDQUFBLEFBcExELElBb0xDO1NBOUtZLGtCQUFrQjs7Ozs7O0lBQzdCLHNDQUErQzs7Ozs7SUFDL0MseUNBQXFDOzs7OztJQUNyQyw4Q0FBMEQ7O0lBQzFELHVDQUE4Qjs7SUFDOUIsbUNBQXVCOztJQUN2QixzQ0FBMEI7O0lBQzFCLHNDQUEwQjs7SUFDMUIsNENBQWdDOztJQUVoQyxxQ0FBeUI7O0lBQ3pCLHNDQUEyQjs7SUFDM0IsNENBQStCOztJQUMvQix1Q0FBMkI7O0lBQzNCLHdDQUE2Qjs7SUFDN0IsOENBQWlDOztJQUNqQyxzQ0FBMEI7O0lBQzFCLDBDQUErQjs7SUFDL0IsdUNBQTZCOztJQUM3Qiw2Q0FBa0M7O0lBQ2xDLG1DQUFvQjs7SUFDcEIsMENBYUU7O0lBQ0Ysc0NBZ0JFIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQW5ndWxhclxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IFNlbGVjdEl0ZW0gfSBmcm9tICdwcmltZW5nL2FwaSc7XG5pbXBvcnQgeyBEYXRlRXJyb3JNZXNzYWdlIH0gZnJvbSAnLi4vbW9kZWxzL2RhdGUtZXJyb3ItbWVzc2FnZSc7XG5pbXBvcnQgeyBtZXJnZSwgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyLCBkZWJvdW5jZVRpbWUsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogY29tcG9uZW50LXNlbGVjdG9yXG4gIHNlbGVjdG9yOiAnYW5lZi1pbnB1dC1kYXRlJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2lucHV0LWRhdGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9pbnB1dC1kYXRlLmNvbXBvbmVudC5zY3NzJ10sXG59KVxuZXhwb3J0IGNsYXNzIElucHV0RGF0ZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgcHJpdmF0ZSBub3RpZmllcjogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKTtcbiAgcHJpdmF0ZSBkYXRlQ2hhbmdlczogT2JzZXJ2YWJsZTxhbnk+O1xuICBwcml2YXRlIHVua25vd25Nb250aEl0ZW0gPSB7bGFiZWw6ICdJbmNvbm51JywgdmFsdWU6ICdpJ307XG4gIEBJbnB1dCgpIGZvcm1Hcm91cDogRm9ybUdyb3VwO1xuICBASW5wdXQoKSBsYWJlbDogc3RyaW5nO1xuICBASW5wdXQoKSByZXF1aXJlZCA9IGZhbHNlO1xuICBASW5wdXQoKSByZWFkb25seSA9IGZhbHNlO1xuICBASW5wdXQoKSBkZWZhdWx0RGlzcGxheSA9ICdOL0EnO1xuXG4gIEBJbnB1dCgpIGRheU5hbWU6IHN0cmluZztcbiAgQElucHV0KCkgZGF5TGFiZWwgPSAnSm91cic7XG4gIEBJbnB1dCgpIGRheVBsYWNlaG9sZGVyID0gJ0pKJztcbiAgQElucHV0KCkgbW9udGhOYW1lOiBzdHJpbmc7XG4gIEBJbnB1dCgpIG1vbnRoTGFiZWwgPSAnTW9pcyc7XG4gIEBJbnB1dCgpIG1vbnRoUGxhY2Vob2xkZXIgPSAnTU0nO1xuICBASW5wdXQoKSB5ZWFyTmFtZTogc3RyaW5nO1xuICBASW5wdXQoKSB5ZWFyUmVxdWlyZWQ6IGJvb2xlYW47XG4gIEBJbnB1dCgpIHllYXJMYWJlbCA9ICdBbm7DqWUnO1xuICBASW5wdXQoKSB5ZWFyUGxhY2Vob2xkZXIgPSAnQUFBQSc7XG4gIEBJbnB1dCgpIG1vZGVsOiBhbnk7XG4gIEBJbnB1dCgpIG1vbnRoT3B0aW9uczogU2VsZWN0SXRlbVtdID0gW1xuICAgIHsgbGFiZWw6ICdKYW52aWVyJywgdmFsdWU6IDEgfSxcbiAgICB7IGxhYmVsOiAnRsOpdnJpZXInLCB2YWx1ZTogMiB9LFxuICAgIHsgbGFiZWw6ICdNYXJzJywgdmFsdWU6IDMgfSxcbiAgICB7IGxhYmVsOiAnQXZyaWwnLCB2YWx1ZTogNCB9LFxuICAgIHsgbGFiZWw6ICdNYWknLCB2YWx1ZTogNSB9LFxuICAgIHsgbGFiZWw6ICdKdWluJywgdmFsdWU6IDYgfSxcbiAgICB7IGxhYmVsOiAnSnVpbGxldCcsIHZhbHVlOiA3IH0sXG4gICAgeyBsYWJlbDogJ0Fvw7t0JywgdmFsdWU6IDggfSxcbiAgICB7IGxhYmVsOiAnU2VwdGVtYnJlJywgdmFsdWU6IDkgfSxcbiAgICB7IGxhYmVsOiAnT2N0b2JyZScsIHZhbHVlOiAxMCB9LFxuICAgIHsgbGFiZWw6ICdOb3ZlbWJyZScsIHZhbHVlOiAxMSB9LFxuICAgIHsgbGFiZWw6ICdEw6ljZW1icmUnLCB2YWx1ZTogMTIgfVxuICBdO1xuICBASW5wdXQoKSBtZXNzYWdlczogRGF0ZUVycm9yTWVzc2FnZSA9IHtcbiAgICBkYXk6IHtcbiAgICAgIHJlcXVpcmVkOiAnTGUgam91ciBlc3QgcmVxdWlzJyxcbiAgICAgIHBhdHRlcm46ICdMZSBqb3VyIGRvaXQgw6p0cmUgdW4gbm9tYnJlJyxcbiAgICAgIGxlbmd0aDogJ0xlIGpvdXIgZG9pdCBjb250ZW5pciAyIGNoaWZmcmVzIGF1IG1heGltdW0nLFxuICAgICAgbWluTWF4OiAnTGUgam91ciBkb2l0IMOqdHJlIGNvbXByaXMgZW50cmUgMSBldCAzMSdcbiAgICB9LFxuICAgIG1vbnRoOiB7XG4gICAgICByZXF1aXJlZDogJ0xlIG1vaXMgZXN0IHJlcXVpcydcbiAgICB9LFxuICAgIHllYXI6IHtcbiAgICAgIHJlcXVpcmVkOiAnTFxcJ2FubsOpZSBlc3QgcmVxdWlzZScsXG4gICAgICBwYXR0ZXJuOiAnTFxcJ2FubsOpZSBkb2l0IMOqdHJlIHVuIG5vbWJyZScsXG4gICAgICBsZW5ndGg6ICdMXFwnYW5uw6llIGRvaXQgY29udGVuaXIgNCBjaGlmZnJlcydcbiAgICB9LFxuICAgIGludmFsaWQ6ICdMYSBkYXRlIGVzdCBpbnZhbGlkZSdcbiAgfTtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGNvbnN0IGRheUNoYW5nZXMgPSB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXlOYW1lKS52YWx1ZUNoYW5nZXM7XG4gICAgY29uc3QgbW9udGhDaGFuZ2VzID0gdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMubW9udGhOYW1lKS52YWx1ZUNoYW5nZXM7XG4gICAgY29uc3QgeWVhckNoYW5nZXMgPSB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy55ZWFyTmFtZSkudmFsdWVDaGFuZ2VzO1xuICAgIHRoaXMuZGF0ZUNoYW5nZXMgPSBtZXJnZShkYXlDaGFuZ2VzLCBtb250aENoYW5nZXMsIHllYXJDaGFuZ2VzKTtcbiAgICB0aGlzLmRhdGVWYWxpZGl0eUNoYW5nZSgpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5ub3RpZmllci5uZXh0KCk7XG4gICAgdGhpcy5ub3RpZmllci51bnN1YnNjcmliZSgpO1xuICB9XG5cbiAgZm9ybUNvbnRhaW5zRXJyb3JzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmNvbnRyb2xDb250YWluc0Vycm9ycyh0aGlzLmRheU5hbWUpIHx8XG4gICAgICB0aGlzLmNvbnRyb2xDb250YWluc0Vycm9ycyh0aGlzLm1vbnRoTmFtZSkgfHxcbiAgICAgIHRoaXMuY29udHJvbENvbnRhaW5zRXJyb3JzKHRoaXMueWVhck5hbWUpXG4gICAgKTtcbiAgfVxuXG4gIGNvbnRyb2xDb250YWluc0Vycm9ycyhjb250cm9sTmFtZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZvcm1Hcm91cCAmJiAodGhpcy5mb3JtR3JvdXAuY29udHJvbHNbY29udHJvbE5hbWVdLmVycm9ycyAhPT0gbnVsbCAmJiB0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZGlydHkpO1xuICB9XG5cbiAgaGFzUGF0dGVybkVycm9yKGNvbnRyb2xOYW1lKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbENvbnRhaW5zRXJyb3JzKGNvbnRyb2xOYW1lKSAmJiB0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZXJyb3JzLnBhdHRlcm47XG4gIH1cblxuICBoYXNNaW5NYXhFcnJvcihjb250cm9sTmFtZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluc0Vycm9ycyhjb250cm9sTmFtZSkgJiZcbiAgICAgICh0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZXJyb3JzLm1pbiB8fCB0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZXJyb3JzLm1heCk7XG4gIH1cblxuICBoYXNMZW5ndGhFcnJvcihjb250cm9sTmFtZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluc0Vycm9ycyhjb250cm9sTmFtZSkgJiZcbiAgICAgICh0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZXJyb3JzLm1pbmxlbmd0aCB8fCB0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZXJyb3JzLm1heGxlbmd0aCk7XG4gIH1cblxuICBoYXNSZXF1aXJlZEVycm9yKGNvbnRyb2xOYW1lKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbENvbnRhaW5zRXJyb3JzKGNvbnRyb2xOYW1lKSAmJiB0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZXJyb3JzLnJlcXVpcmVkO1xuICB9XG5cbiAgaGFzSW52YWxpZERhdGVFcnJvcihjb250cm9sTmFtZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluc0Vycm9ycyhjb250cm9sTmFtZSkgJiYgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbY29udHJvbE5hbWVdLmVycm9ycy5pbnZhbGlkRGF0ZTtcbiAgfVxuXG5cbiAgZGF0ZVZhbGlkaXR5Q2hhbmdlKCkge1xuICAgIHRoaXMuZGF0ZUNoYW5nZXMucGlwZShcbiAgICAgIGRlYm91bmNlVGltZSgyMDApLFxuICAgICAgdGFrZVVudGlsKHRoaXMubm90aWZpZXIpXG4gICAgKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5yZXNldEVycm9ycygpO1xuICAgICAgY29uc3QgZGF5ID0gTnVtYmVyKHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmRheU5hbWUpLnZhbHVlKTtcbiAgICAgIGNvbnN0IG1vbnRoID0gdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMubW9udGhOYW1lKS52YWx1ZSAtIDE7XG4gICAgICBjb25zdCB5ZWFyID0gTnVtYmVyKHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLnllYXJOYW1lKS52YWx1ZSk7XG4gICAgICB0aGlzLmNoZWNrRGF0ZVZhbGlkaXR5KGRheSwgbW9udGgsIHllYXIpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRGaWVsZHMoKSB7XG4gICAgcmV0dXJuIHsgZGF5OiB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXlOYW1lKS52YWx1ZSwgbW9udGg6IHRoaXMuZ2V0TW9udGhWYWx1ZSh0cnVlKSwgeWVhcjogdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMueWVhck5hbWUpLnZhbHVlIH1cbiAgfVxuXG4gIC8qKiogUmV0dXJucyBGb3JtR3JvdXAgbW9udGggZmllbGQgdmFsdWUgKi9cbiAgcHJpdmF0ZSBnZXRNb250aFZhbHVlKGNvcnJlY3RGb3JNb21lbnQ/OiBib29sZWFuKSB7XG4gICAgbGV0ICB2YWx1ZSA9IHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLm1vbnRoTmFtZSkudmFsdWU7XG4gICAgaWYgKHZhbHVlID09PSB0aGlzLnVua25vd25Nb250aEl0ZW0udmFsdWUpIHtcbiAgICAgIHZhbHVlID0gMTtcbiAgICB9XG4gICAgaWYgKGNvcnJlY3RGb3JNb21lbnQpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAtIDE7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGFyZUZpZWxkc0ZpbGxlZCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBmaWVsZHMgPSB0aGlzLmdldEZpZWxkcygpO1xuICAgIHJldHVybiBmaWVsZHMuZGF5ICE9IG51bGwgJiYgZmllbGRzLm1vbnRoICE9IC0xICYmIGZpZWxkcy55ZWFyICE9IG51bGw7XG4gIH1cblxuICBjaGVja0RhdGVWYWxpZGl0eShkYXk6IG51bWJlciwgbW9udGg6IGFueSwgeWVhcjogbnVtYmVyKSB7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5nZXRGaWVsZHMoKTtcbiAgICBpZiAodGhpcy5hcmVGaWVsZHNGaWxsZWQoKSAmJiAhbW9tZW50KFt5ZWFyLCBtb250aCwgZGF5XSkuaXNWYWxpZCgpKSB7XG4gICAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy55ZWFyTmFtZSkuc2V0RXJyb3JzKHsgaW52YWxpZERhdGU6IHRydWUgfSwgeyBlbWl0RXZlbnQ6IHRydWUgfSk7XG4gICAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5tb250aE5hbWUpLnNldEVycm9ycyh7IGludmFsaWREYXRlOiB0cnVlIH0sIHsgZW1pdEV2ZW50OiB0cnVlIH0pO1xuICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF5TmFtZSkuc2V0RXJyb3JzKHsgaW52YWxpZERhdGU6IHRydWUgfSwgeyBlbWl0RXZlbnQ6IHRydWUgfSk7XG4gICAgICB0aGlzLmZvcm1Hcm91cC5zZXRFcnJvcnMoeyBpbnZhbGlkRGF0ZTogdHJ1ZSB9LCB7IGVtaXRFdmVudDogdHJ1ZSB9KTtcblxuICAgICAgaWYgKCh0aGlzLnJlcXVpcmVkIHx8IHRoaXMueWVhclJlcXVpcmVkICkgJiYgdGhpcy5hcmVGaWVsZHNGaWxsZWQoKSkge1xuICAgICAgICByZXR1cm4geyBpbnZhbGlkRGF0ZSA6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1vbWVudChbZmllbGRzLnllYXIsIGZpZWxkcy5tb250aCwgZmllbGRzLmRheV0pLmlzVmFsaWQoKSl7XG4gICAgICB0aGlzLmZvcm1Hcm91cC5zZXRFcnJvcnMobnVsbCk7XG4gICAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy55ZWFyTmFtZSkuc2V0RXJyb3JzKG51bGwpO1xuICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMubW9udGhOYW1lKS5zZXRFcnJvcnMobnVsbCk7XG4gICAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXlOYW1lKS5zZXRFcnJvcnMobnVsbCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldEVycm9ycygpIHtcbiAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXlOYW1lKS5zZXRFcnJvcnMobnVsbCk7XG4gICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMubW9udGhOYW1lKS5zZXRFcnJvcnMobnVsbCk7XG4gICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMueWVhck5hbWUpLnNldEVycm9ycyhudWxsKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBjb25zdCBkYXkgPSBOdW1iZXIodGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF5TmFtZSkudmFsdWUpO1xuICAgIHJlc3VsdCArPSBkYXkgPyAoJzAnICsgZGF5KS5zbGljZSgtMikgKyAnLycgOiAnJztcbiAgICBjb25zdCBtb250aCA9IE51bWJlcih0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5tb250aE5hbWUpLnZhbHVlKTtcbiAgICByZXN1bHQgKz0gbW9udGggPyAoJzAnICsgbW9udGgpLnNsaWNlKC0yKSArICcvJyA6ICcnO1xuICAgIGNvbnN0IHllYXIgPSBOdW1iZXIodGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMueWVhck5hbWUpLnZhbHVlKTtcbiAgICByZXN1bHQgKz0geWVhcjtcbiAgICByZXR1cm4gcmVzdWx0ID09PSAnMCcgPyB0aGlzLmRlZmF1bHREaXNwbGF5IDogcmVzdWx0O1xuICB9XG59XG4iXX0=