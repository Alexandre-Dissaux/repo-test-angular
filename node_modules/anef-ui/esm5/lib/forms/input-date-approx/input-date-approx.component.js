/**
 * @fileoverview added by tsickle
 * Generated from: lib/forms/input-date-approx/input-date-approx.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
// Angular
import { Component, Input } from '@angular/core';
import { FormGroup, Validators } from '@angular/forms';
import { Subject } from 'rxjs';
import { takeUntil, startWith, distinctUntilChanged, } from 'rxjs/operators';
import moment from 'moment';
var InputDateApproxComponent = /** @class */ (function () {
    function InputDateApproxComponent() {
        var _this = this;
        this.notifier = new Subject();
        this.unknownMonthItem = { label: 'Inconnu', value: 'i' };
        this.isDateApprox = false;
        /**
         * Is FormGroup required
         */
        this.required = true;
        /**
         * Is FormGroup readonly
         */
        this.readonly = false;
        /**
         * Default date value displayed in readonly mode
         * \@default 'N/A'
         */
        this.defaultDisplay = 'N/A';
        /**
         * FormGroup day control label
         * \@default 'Jour'
         */
        this.dayLabel = 'Jour';
        /**
         * FormGroup day control placeholder
         * \@default 'JJ'
         */
        this.dayPlaceholder = 'JJ';
        /**
         * FormGroup month control label
         * \@default 'Mois'
         */
        this.monthLabel = 'Mois';
        /**
         * FormGroup day control placeholder
         * \@default 'MM'
         */
        this.monthPlaceholder = 'MM';
        /**
         * FormGroup year control label
         * \@default 'Année'
         */
        this.yearLabel = 'Année';
        /**
         * FormGroup year control placeholder
         * \@default 'AAAA'
         */
        this.yearPlaceholder = 'AAAA';
        /**
         * FormGroup month control dropdown options
         * \@default SelectItem[] = [
         * { label: 'Janvier', value: 1 },
         * { label: 'Février', value: 2 },
         * { label: 'Mars', value: 3 },
         * { label: 'Avril', value: 4 },
         * { label: 'Mai', value: 5 },
         * { label: 'Juin', value: 6 },
         * { label: 'Juillet', value: 7 },
         * { label: 'Août', value: 8 },
         * { label: 'Septembre', value: 9 },
         * { label: 'Octobre', value: 10 },
         * { label: 'Novembre', value: 11 },
         * { label: 'Décembre', value: 12 }
         * ]
         */
        this.monthOptions = [
            { label: 'Janvier', value: 1 },
            { label: 'Février', value: 2 },
            { label: 'Mars', value: 3 },
            { label: 'Avril', value: 4 },
            { label: 'Mai', value: 5 },
            { label: 'Juin', value: 6 },
            { label: 'Juillet', value: 7 },
            { label: 'Août', value: 8 },
            { label: 'Septembre', value: 9 },
            { label: 'Octobre', value: 10 },
            { label: 'Novembre', value: 11 },
            { label: 'Décembre', value: 12 }
        ];
        /**
         * FormGroup validation error messages
         * \@default DateErrorMessage = {
         *     day: {
         *       required: 'Le jour est requis',
         *       pattern: 'Le jour doit être un nombre',
         *       length: 'Le jour doit contenir 2 chiffres au maximum',
         *       minMax: 'Le jour doit être compris entre 1 et 31'
         *     },
         *     month: {
         *       required: 'Le mois est requis'
         *     },
         *     year: {
         *       required: 'L\'année est requise',
         *       pattern: 'L\'année doit être un nombre',
         *       length: 'L\'année doit contenir 4 chiffres'
         *     },
         *     invalid: 'La date est invalide',
         *     required: 'Ce champ est obligatoire.'
         *   }
         */
        this.messages = {
            day: {
                required: 'Le jour est requis',
                pattern: 'Le jour doit être un nombre',
                length: 'Le jour doit contenir 2 chiffres au maximum',
                minMax: 'Le jour doit être compris entre 1 et 31'
            },
            month: {
                required: 'Le mois est requis'
            },
            year: {
                required: 'L\'année est requise',
                pattern: 'L\'année doit être un nombre',
                length: 'L\'année doit contenir 4 chiffres'
            },
            invalid: 'La date est invalide',
            required: 'Ce champ est obligatoire.'
        };
        /**
         * Can the date be approximative or not
         * \@default false
         * \@usage [canBeApproximative]="true"
         */
        this.canBeApproximative = false;
        /**
         * FormGroup approximative date label
         * \@default 'Approximative'
         */
        this.dateApproxLabel = 'Approximative';
        /**
         * Approximative date format
         * \@values {known: 'FF/FF/FFFF', dayUnknown: '00/FF/FFFF', dayMonthUnknown: '00/00/FFFF'}
         */
        this.dateApproxMasks = { known: 'FF/FF/FFFF', dayUnknown: '00/FF/FFFF', dayMonthUnknown: '00/00/FFFF' };
        this.crossFieldsMinDateValidator = (/**
         * @param {?} fg
         * @return {?}
         */
        function (fg) {
            /** @type {?} */
            var fields = _this.getFields();
            if (moment([fields.year, fields.month, fields.day]).isValid() && !_this.formContainsErrors()) {
                if (moment([fields.year, fields.month, fields.day]) < moment(_this.minDate, 'DD/MM/YYYY')) {
                    return { tooOld: true };
                }
            }
            return null;
        });
        this.crossFieldsMaxDateValidator = (/**
         * @param {?} fg
         * @return {?}
         */
        function (fg) {
            /** @type {?} */
            var fields = _this.getFields();
            if (moment([fields.year, fields.month, fields.day]).isValid() && !_this.formContainsErrors()) {
                /** @type {?} */
                var date = moment([fields.year, fields.month, fields.day]);
                if (_this.maxDate === 'now' && date > moment() || date > moment(_this.maxDate, 'DD/MM/YYYY')) {
                    return { tooFuture: true };
                }
            }
            return null;
        });
        this.crossFieldsDateValidator = (/**
         * @param {?} fg
         * @return {?}
         */
        function (fg) {
            /** @type {?} */
            var fields = _this.getFields();
            if (!moment([fields.year, fields.month, fields.day]).isValid()) {
                if (_this.areFieldsFilled()) {
                    _this.formGroup.get(_this.yearName).setErrors({ invalidDate: true }, { emitEvent: true });
                    _this.formGroup.get(_this.monthName).setErrors({ invalidDate: true }, { emitEvent: true });
                    _this.formGroup.get(_this.dayName).setErrors({ invalidDate: true }, { emitEvent: true });
                }
                _this.formGroup.setErrors({ invalidDate: true });
                if ((_this.required || _this.yearRequired) && _this.areFieldsFilled()) {
                    return { invalidDate: true };
                }
            }
            if (moment([fields.year, fields.month, fields.day]).isValid()) {
                _this.formGroup.setErrors(null);
                _this.formGroup.get(_this.yearName).setErrors(null);
                _this.formGroup.get(_this.monthName).setErrors(null);
                _this.formGroup.get(_this.dayName).setErrors(null);
            }
            return null;
        });
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    InputDateApproxComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['readonly'] && changes['readonly'].previousValue != changes['readonly'].currentValue) {
            this.setCheckboxStyle(changes['readonly'].currentValue);
            if (this.formGroup.get(this.dateApproxMaskName) && this.formGroup.get(this.dateApproxMaskName).value === this.dateApproxMasks.dayMonthUnknown) {
                this.editMonthOptions(true);
            }
        }
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (!this.readonly) {
            this.addDayControlMinMaxValidator();
            this.addFormGroupValidators();
        }
        if (this.canBeApproximative && this.formGroup.get(this.dateApproxCheckboxName)) {
            this.dateApproxCheckboxChange();
            this.monthOptionChange();
        }
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.addDayControlMinMaxValidator = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var validatorsArray = [];
        validatorsArray.push(Validators.min(1), Validators.max(31));
        if (this.formGroup.get(this.dayName).validator) {
            validatorsArray.push(this.formGroup.get(this.dayName).validator);
        }
        this.formGroup.get(this.dayName).setValidators(validatorsArray);
        this.formGroup.get(this.dayName).updateValueAndValidity();
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.addFormGroupValidators = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var validatorsArray = [];
        validatorsArray.push(this.crossFieldsDateValidator);
        if (this.minDate && this.minDateErrorMessage) {
            validatorsArray.push(this.crossFieldsMinDateValidator);
        }
        if (this.maxDate && this.maxDateErrorMessage) {
            validatorsArray.push(this.crossFieldsMaxDateValidator);
        }
        if (this.formGroup.validator) {
            validatorsArray.push(this.formGroup.validator);
        }
        this.formGroup.setValidators(validatorsArray);
        this.formGroup.updateValueAndValidity();
    };
    /**
     * @private
     * @return {?}
     */
    InputDateApproxComponent.prototype.getFields = /**
     * @private
     * @return {?}
     */
    function () {
        return { day: this.formGroup.get(this.dayName).value, month: this.getMonthValue(true), year: this.formGroup.get(this.yearName).value };
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.areFieldsEmpty = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var fields = this.getFields();
        return !fields.day && !fields.month && !fields.year;
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.areFieldsFilled = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var fields = this.getFields();
        return fields.day != null && fields.month > -1 && fields.year != null;
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.areFieldsTouched = /**
     * @return {?}
     */
    function () {
        return this.formGroup.get(this.yearName).touched && this.formGroup.get(this.yearName).touched && this.formGroup.get(this.yearName).touched;
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.notifier.next();
        this.notifier.unsubscribe();
    };
    /** Returns true if form is invalid */
    /**
     * Returns true if form is invalid
     * @return {?}
     */
    InputDateApproxComponent.prototype.formContainsErrors = /**
     * Returns true if form is invalid
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var controlNames = [this.dayName, this.monthName, this.yearName];
        return controlNames.some((/**
         * @param {?} controlName
         * @return {?}
         */
        function (controlName) {
            return _this.controlContainsErrors(controlName);
        }));
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.formError = /**
     * @return {?}
     */
    function () {
        return this.formGroup.touched && this.formGroup.errors !== null;
    };
    /** Returns true if a control is invalid */
    /**
     * Returns true if a control is invalid
     * @param {?} controlName
     * @return {?}
     */
    InputDateApproxComponent.prototype.controlContainsErrors = /**
     * Returns true if a control is invalid
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.formGroup && (this.formGroup.controls[controlName].errors !== null && (this.formGroup.controls[controlName].dirty || this.formGroup.controls[controlName].touched));
    };
    /** Returns true if control value has pattern errors */
    /**
     * Returns true if control value has pattern errors
     * @param {?} controlName
     * @return {?}
     */
    InputDateApproxComponent.prototype.hasPatternError = /**
     * Returns true if control value has pattern errors
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) && this.formGroup.controls[controlName].errors.pattern;
    };
    /** Returns true if control value is inferior to control min value or superior to control max value */
    /**
     * Returns true if control value is inferior to control min value or superior to control max value
     * @param {?} controlName
     * @return {?}
     */
    InputDateApproxComponent.prototype.hasMinMaxError = /**
     * Returns true if control value is inferior to control min value or superior to control max value
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) &&
            (this.formGroup.controls[controlName].errors.min || this.formGroup.controls[controlName].errors.max);
    };
    /** Returns true if control value length is inferior to control min value length or superior to control max value length */
    /**
     * Returns true if control value length is inferior to control min value length or superior to control max value length
     * @param {?} controlName
     * @return {?}
     */
    InputDateApproxComponent.prototype.hasLengthError = /**
     * Returns true if control value length is inferior to control min value length or superior to control max value length
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) &&
            (this.formGroup.controls[controlName].errors.minlength || this.formGroup.controls[controlName].errors.maxlength);
    };
    /** Returns true if control is required but not filled */
    /**
     * Returns true if control is required but not filled
     * @param {?} controlName
     * @return {?}
     */
    InputDateApproxComponent.prototype.hasRequiredError = /**
     * Returns true if control is required but not filled
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) && this.formGroup.controls[controlName].errors.required;
    };
    /** Returns true if control is not a valid date */
    /**
     * Returns true if control is not a valid date
     * @param {?} controlName
     * @return {?}
     */
    InputDateApproxComponent.prototype.hasInvalidDateError = /**
     * Returns true if control is not a valid date
     * @param {?} controlName
     * @return {?}
     */
    function (controlName) {
        return this.controlContainsErrors(controlName) && this.formGroup.controls[controlName].errors.invalidDate;
    };
    /** Returns true if form does not have a valid date */
    /**
     * Returns true if form does not have a valid date
     * @return {?}
     */
    InputDateApproxComponent.prototype.hasFormGroupInvalidateError = /**
     * Returns true if form does not have a valid date
     * @return {?}
     */
    function () {
        return this.formGroup.errors && this.formGroup.errors.invalidDate;
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.hasFutureDateError = /**
     * @return {?}
     */
    function () {
        return this.formGroup.errors && this.formGroup.errors.tooFuture;
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.hasTooOldDateError = /**
     * @return {?}
     */
    function () {
        return this.formGroup.errors && this.formGroup.errors.tooOld;
    };
    /**
     * @return {?}
     */
    InputDateApproxComponent.prototype.isAllFieldsFilled = /**
     * @return {?}
     */
    function () {
        return this.hasRequiredError(this.yearName)
            && this.hasRequiredError(this.monthName)
            && this.hasRequiredError(this.dayName);
    };
    /*** Returns FormGroup month field value */
    /**
     * Returns FormGroup month field value
     * @private
     * @param {?=} correctForMoment
     * @return {?}
     */
    InputDateApproxComponent.prototype.getMonthValue = /**
     * Returns FormGroup month field value
     * @private
     * @param {?=} correctForMoment
     * @return {?}
     */
    function (correctForMoment) {
        /** @type {?} */
        var value = this.formGroup.get(this.monthName).value;
        if (value === this.unknownMonthItem.value) {
            value = 1;
        }
        if (correctForMoment) {
            return value - 1;
        }
        return value;
    };
    /** Format date to string for display */
    /**
     * Format date to string for display
     * @return {?}
     */
    InputDateApproxComponent.prototype.toString = /**
     * Format date to string for display
     * @return {?}
     */
    function () {
        /** @type {?} */
        var dateString;
        /** @type {?} */
        var day = this.formGroup.get(this.dayName).value;
        /** @type {?} */
        var month = this.formGroup.get(this.monthName).value;
        /** @type {?} */
        var year = this.formGroup.get(this.yearName).value;
        /** @type {?} */
        var nonApproxAndEmpty = !this.isDateApprox && !day && !month && !year;
        /** @type {?} */
        var approxAndEmpty = this.isDateApprox && !month && !year;
        if (nonApproxAndEmpty || approxAndEmpty) {
            dateString = this.defaultDisplay;
        }
        else {
            moment.updateLocale(moment.locale(), { invalidDate: this.defaultDisplay });
            dateString = moment([Number(year), Number(this.getMonthValue(true)), Number(day)]).format('DD/MM/YYYY');
            if (!nonApproxAndEmpty && !this.isDateApprox) {
                return dateString;
            }
            else if (!approxAndEmpty && this.isDateApprox) {
                /** @type {?} */
                var mask = this.formGroup.get(this.dateApproxMaskName).value;
                /** @type {?} */
                var dateStringArray = dateString.split('/');
                if (mask === this.dateApproxMasks.dayUnknown) {
                    dateStringArray[0] = '-';
                }
                else if (mask === this.dateApproxMasks.dayMonthUnknown) {
                    dateStringArray[0] = '-';
                    dateStringArray[1] = '-';
                }
                dateString = dateStringArray.join('/');
            }
        }
        return dateString;
    };
    /** Triggers date approx editing functions following date approx checkbox values */
    /**
     * Triggers date approx editing functions following date approx checkbox values
     * @private
     * @return {?}
     */
    InputDateApproxComponent.prototype.dateApproxCheckboxChange = /**
     * Triggers date approx editing functions following date approx checkbox values
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.formGroup.get(this.dateApproxCheckboxName).valueChanges
            .pipe(startWith(this.formGroup.get(this.dateApproxCheckboxName).value), distinctUntilChanged(), takeUntil(this.notifier))
            .subscribe((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            _this.isDateApprox = value;
            _this.setDayValue(value);
            _this.editMonthOptions(value);
            _this.setDateApproxMask(value);
        }));
    };
    /** Triggers SetDateApproxMAsk on monthOptions change */
    /**
     * Triggers SetDateApproxMAsk on monthOptions change
     * @private
     * @return {?}
     */
    InputDateApproxComponent.prototype.monthOptionChange = /**
     * Triggers SetDateApproxMAsk on monthOptions change
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.formGroup.get(this.monthName).valueChanges
            .pipe(startWith(this.formGroup.get(this.monthName).value), distinctUntilChanged(), takeUntil(this.notifier))
            .subscribe((/**
         * @return {?}
         */
        function () {
            _this.setDateApproxMask(_this.isDateApprox);
            _this.formGroup.updateValueAndValidity();
        }));
    };
    /** Sets day value to 1 if date is approximative */
    /**
     * Sets day value to 1 if date is approximative
     * @private
     * @param {?} value
     * @return {?}
     */
    InputDateApproxComponent.prototype.setDayValue = /**
     * Sets day value to 1 if date is approximative
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value) {
            this.formGroup.get(this.dayName).setValue('1');
        }
        else {
            if (this.formGroup.get(this.dateApproxCheckboxName).dirty) {
                this.formGroup.get(this.dayName).reset();
            }
        }
    };
    /** Adds or remove 'Inconnu' month option */
    /**
     * Adds or remove 'Inconnu' month option
     * @private
     * @param {?} value
     * @return {?}
     */
    InputDateApproxComponent.prototype.editMonthOptions = /**
     * Adds or remove 'Inconnu' month option
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        var _this = this;
        /** @type {?} */
        var hasUnknownMonthItem = this.monthOptions.some((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.value === _this.unknownMonthItem.value; }));
        if (value) {
            if (!hasUnknownMonthItem) {
                this.monthOptions.unshift(this.unknownMonthItem);
            }
            if (this.formGroup.get(this.dateApproxMaskName).value === this.dateApproxMasks.dayMonthUnknown) {
                this.formGroup.get(this.monthName).setValue(this.unknownMonthItem.value);
            }
        }
        else {
            if (hasUnknownMonthItem) {
                this.monthOptions.shift();
            }
            if (this.formGroup.get(this.monthName).value === this.unknownMonthItem.value) {
                this.formGroup.get(this.monthName).reset();
            }
        }
    };
    /** Sets date approx mask  */
    /**
     * Sets date approx mask
     * @private
     * @param {?} value
     * @return {?}
     */
    InputDateApproxComponent.prototype.setDateApproxMask = /**
     * Sets date approx mask
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var dateApproxMaskName = this.formGroup.get(this.dateApproxMaskName);
        if (value) {
            if (this.formGroup.get(this.monthName).value === this.unknownMonthItem.value) {
                dateApproxMaskName.setValue(this.dateApproxMasks.dayMonthUnknown);
            }
            else {
                dateApproxMaskName.setValue(this.dateApproxMasks.dayUnknown);
            }
        }
        else {
            dateApproxMaskName.setValue(this.dateApproxMasks.known);
        }
    };
    /** Set approx checkbox style in readonly mode */
    /**
     * Set approx checkbox style in readonly mode
     * @private
     * @param {?} isReadOnly
     * @return {?}
     */
    InputDateApproxComponent.prototype.setCheckboxStyle = /**
     * Set approx checkbox style in readonly mode
     * @private
     * @param {?} isReadOnly
     * @return {?}
     */
    function (isReadOnly) {
        if (this.canBeApproximative && this.formGroup.get(this.dateApproxCheckboxName)) {
            if (isReadOnly) {
                this.formGroup.get(this.dateApproxCheckboxName).disable();
            }
            else {
                this.formGroup.get(this.dateApproxCheckboxName).enable();
            }
        }
    };
    InputDateApproxComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line: component-selector
                    selector: 'anef-input-date-approx',
                    template: "<div class=\"p-grid nogutter\" [formGroup]=\"formGroup\">\n  <div class=\"p-col-12\">\n    <fieldset>\n      <div class=\"p-grid nogutter\" *ngIf=\"canBeApproximative; else dateCannotBeApproximative\">\n        <div class=\"p-col-8\">\n          <legend *ngIf=\"label\">\n            {{ label }} <span class=\"redish\" *ngIf=\"required\">*</span> :\n          </legend>\n        </div>\n        <div class=\"p-col-4\">\n          <p-checkbox\n                [name]=\"dateApproxCheckboxName\"\n                value=\"true\"\n                binary=\"true\"\n                [label]=\"dateApproxLabel\"\n                [formControlName]=\"dateApproxCheckboxName\"\n                checkboxIcon=\"pi pi-check\"\n                >\n          </p-checkbox>\n\n        </div>\n      </div>\n      <ng-template #dateCannotBeApproximative>\n        <legend *ngIf=\"label\">\n          {{ label }} <span class=\"redish\" *ngIf=\"required\">*</span> :\n        </legend>\n      </ng-template>\n\n      <ng-content select=\"[sub-label]\"></ng-content>\n      <input *ngIf=\"isDateApprox\" pInputText type=\"hidden\" [id]=\"dateApproxMaskName\" [name]=\"dateApproxMaskName\" [formControlName]=\"dateApproxMaskName\">\n\n      <div *ngIf=\"!readonly; else textual\" class=\"p-grid\">\n        <div class=\"p-col-12 p-md-2\">\n          <div class=\"p-grid nogutter\">\n            <div class=\"p-col-12\">\n              <label id=\"dayHelpBlock\">{{ dayLabel }} :\n              </label>\n              <input pInputText [id]=\"dayName\" [name]=\"dayName\" type=\"text\" class=\"day\"\n                     placeholder=\"{{dayPlaceholder}}\" aria-describedby=\"dayHelpBlock\" [hidden]=\"isDateApprox\"\n                     [formControlName]=\"dayName\" pattern=\"[0-9]{0,2}\" min=\"1\" max=\"31\" maxlength=\"2\">\n\n              <input *ngIf=\"isDateApprox\" pInputText id=\"dayApproxName\" name=\"dayApproxName\" type=\"text\" class=\"day\"\n              placeholder=\" \" aria-describedby=\"dayHelpBlock\" disabled=\"true\">\n            </div>\n          </div>\n        </div>\n        <div class=\"p-col-12 p-md-6\">\n          <div class=\"p-grid nogutter\">\n            <div class=\"p-col-12\">\n              <label id=\"monthHelpBlock\">{{ monthLabel }} :\n              </label>\n              <p-dropdown class=\"month-dropdown\" [id]=\"monthName\" [name]=\"monthName\" aria-describedby=\"monthHelpBlock\"\n                          [placeholder]=monthPlaceholder [options]=monthOptions\n                          [formControlName]=\"monthName\" >\n              </p-dropdown>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"p-col-12 p-md-4\">\n          <div class=\"p-grid nogutter\">\n            <div class=\"p-col-12\">\n              <label id=\"yearHelpBlock\">{{ yearLabel}}\n                <span class=\"redish\" *ngIf=\"yearRequired\"> *</span> :\n              </label>\n              <input pInputText [id]=\"yearName\" [name]=\"yearName\" type=\"text\" placeholder=\"{{ yearPlaceholder }}\"\n                     pattern=\"[0-9]{0,4}\" minlength=\"4\" maxlength=\"4\"\n                     aria-describedby=\"yearHelpBlock\" [formControlName]=\"yearName\">\n            </div>\n          </div>\n        </div>\n      </div>\n      <ng-template #textual>\n        <span class=\"textual\">{{toString()}}</span>\n      </ng-template>\n\n      <ng-content select=\"[complement]\"></ng-content>\n\n      <div class=\"redish errors\" *ngIf=\"(formContainsErrors() || formGroup.errors) && !isAllFieldsFilled(); else dateRequired\">\n        <div *ngIf=\"controlContainsErrors(dayName)\">\n          <div *ngIf=\"hasPatternError(dayName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.day.pattern}}\n            </span>\n          </div>\n          <div *ngIf=\"hasMinMaxError(dayName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.day.minMax}}\n            </span>\n          </div>\n          <div *ngIf=\"hasLengthError(dayName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.day.length}}\n            </span>\n          </div>\n          <div *ngIf=\"hasRequiredError(dayName) && !hasPatternError(dayName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.day.required}}\n            </span>\n          </div>\n        </div>\n        <div *ngIf=\"controlContainsErrors(monthName)\">\n          <div *ngIf=\"hasRequiredError(monthName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.month.required}}\n            </span>\n          </div>\n        </div>\n        <div *ngIf=\"controlContainsErrors(yearName)\">\n          <div *ngIf=\"hasPatternError(yearName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.year.pattern}}\n            </span>\n          </div>\n          <div *ngIf=\"hasLengthError(yearName) && !hasPatternError(yearName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.year.length}}\n            </span>\n          </div>\n          <div *ngIf=\"hasRequiredError(yearName) && !hasPatternError(yearName)\">\n            <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n            <span>\n              {{messages.year.required}}\n            </span>\n          </div>\n        </div>\n\n        <div *ngIf=\"hasFormGroupInvalidateError()\"><i\n          class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n          <span>\n              {{messages.invalid}}\n          </span>\n        </div>\n\n        <div *ngIf=\"hasTooOldDateError()\"><i\n          class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n          <span>\n              {{minDateErrorMessage}}\n          </span>\n        </div>\n\n\n        <div *ngIf=\"hasFutureDateError()\"><i\n          class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n          <span>\n              {{maxDateErrorMessage}}\n          </span>\n        </div>\n\n        <ng-content select=\"[messages]\"></ng-content>\n      </div>\n      <ng-template #dateRequired >\n        <div class=\"redish errors\" *ngIf=\"isAllFieldsFilled()\">\n          <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>\n          <span>\n            {{messages.required}}\n          </span>\n        </div>\n      </ng-template>\n    </fieldset>\n  </div>\n</div>\n",
                    styles: [".textual{display:block}.day{padding-left:1rem;padding-right:1rem;min-width:4rem}#dayHelpBlock{white-space:nowrap}fieldset{border-color:transparent;border-width:0;padding:0}legend{-webkit-padding-start:0;padding-inline-start:0;padding-bottom:1rem}.p-grid label{margin:0;color:#656565}body .ui-dropdown-panel .ui-dropdown-items .ui-dropdown-item span:first{color:#656565}::-webkit-input-placeholder{color:#111}:-moz-placeholder{color:#111}::-moz-placeholder{color:#111}:-ms-input-placeholder{color:#111}"]
                }] }
    ];
    /** @nocollapse */
    InputDateApproxComponent.ctorParameters = function () { return []; };
    InputDateApproxComponent.propDecorators = {
        formGroup: [{ type: Input }],
        label: [{ type: Input }],
        required: [{ type: Input }],
        readonly: [{ type: Input }],
        defaultDisplay: [{ type: Input }],
        dayName: [{ type: Input }],
        dayLabel: [{ type: Input }],
        dayPlaceholder: [{ type: Input }],
        monthName: [{ type: Input }],
        monthLabel: [{ type: Input }],
        monthPlaceholder: [{ type: Input }],
        yearName: [{ type: Input }],
        yearRequired: [{ type: Input }],
        yearLabel: [{ type: Input }],
        yearPlaceholder: [{ type: Input }],
        model: [{ type: Input }],
        monthOptions: [{ type: Input }],
        messages: [{ type: Input }],
        canBeApproximative: [{ type: Input }],
        dateApproxLabel: [{ type: Input }],
        dateApproxCheckboxName: [{ type: Input }],
        dateApproxMasks: [{ type: Input }],
        dateApproxMaskName: [{ type: Input }],
        maxDate: [{ type: Input }],
        maxDateErrorMessage: [{ type: Input }],
        minDate: [{ type: Input }],
        minDateErrorMessage: [{ type: Input }]
    };
    return InputDateApproxComponent;
}());
export { InputDateApproxComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    InputDateApproxComponent.prototype.notifier;
    /**
     * @type {?}
     * @private
     */
    InputDateApproxComponent.prototype.unknownMonthItem;
    /** @type {?} */
    InputDateApproxComponent.prototype.isDateApprox;
    /**
     * FormGroup name
     * @type {?}
     */
    InputDateApproxComponent.prototype.formGroup;
    /**
     * FormGroup label
     * @type {?}
     */
    InputDateApproxComponent.prototype.label;
    /**
     * Is FormGroup required
     * @type {?}
     */
    InputDateApproxComponent.prototype.required;
    /**
     * Is FormGroup readonly
     * @type {?}
     */
    InputDateApproxComponent.prototype.readonly;
    /**
     * Default date value displayed in readonly mode
     * \@default 'N/A'
     * @type {?}
     */
    InputDateApproxComponent.prototype.defaultDisplay;
    /**
     * FormGroup day control name
     * @type {?}
     */
    InputDateApproxComponent.prototype.dayName;
    /**
     * FormGroup day control label
     * \@default 'Jour'
     * @type {?}
     */
    InputDateApproxComponent.prototype.dayLabel;
    /**
     * FormGroup day control placeholder
     * \@default 'JJ'
     * @type {?}
     */
    InputDateApproxComponent.prototype.dayPlaceholder;
    /**
     * FormGroup month control name
     * @type {?}
     */
    InputDateApproxComponent.prototype.monthName;
    /**
     * FormGroup month control label
     * \@default 'Mois'
     * @type {?}
     */
    InputDateApproxComponent.prototype.monthLabel;
    /**
     * FormGroup day control placeholder
     * \@default 'MM'
     * @type {?}
     */
    InputDateApproxComponent.prototype.monthPlaceholder;
    /**
     * FormGroup year control name
     * @type {?}
     */
    InputDateApproxComponent.prototype.yearName;
    /**
     * Puts a required * mark aside the year control
     * @type {?}
     */
    InputDateApproxComponent.prototype.yearRequired;
    /**
     * FormGroup year control label
     * \@default 'Année'
     * @type {?}
     */
    InputDateApproxComponent.prototype.yearLabel;
    /**
     * FormGroup year control placeholder
     * \@default 'AAAA'
     * @type {?}
     */
    InputDateApproxComponent.prototype.yearPlaceholder;
    /**
     * model property for usage with ngModel to be defined
     * @type {?}
     */
    InputDateApproxComponent.prototype.model;
    /**
     * FormGroup month control dropdown options
     * \@default SelectItem[] = [
     * { label: 'Janvier', value: 1 },
     * { label: 'Février', value: 2 },
     * { label: 'Mars', value: 3 },
     * { label: 'Avril', value: 4 },
     * { label: 'Mai', value: 5 },
     * { label: 'Juin', value: 6 },
     * { label: 'Juillet', value: 7 },
     * { label: 'Août', value: 8 },
     * { label: 'Septembre', value: 9 },
     * { label: 'Octobre', value: 10 },
     * { label: 'Novembre', value: 11 },
     * { label: 'Décembre', value: 12 }
     * ]
     * @type {?}
     */
    InputDateApproxComponent.prototype.monthOptions;
    /**
     * FormGroup validation error messages
     * \@default DateErrorMessage = {
     *     day: {
     *       required: 'Le jour est requis',
     *       pattern: 'Le jour doit être un nombre',
     *       length: 'Le jour doit contenir 2 chiffres au maximum',
     *       minMax: 'Le jour doit être compris entre 1 et 31'
     *     },
     *     month: {
     *       required: 'Le mois est requis'
     *     },
     *     year: {
     *       required: 'L\'année est requise',
     *       pattern: 'L\'année doit être un nombre',
     *       length: 'L\'année doit contenir 4 chiffres'
     *     },
     *     invalid: 'La date est invalide',
     *     required: 'Ce champ est obligatoire.'
     *   }
     * @type {?}
     */
    InputDateApproxComponent.prototype.messages;
    /**
     * Can the date be approximative or not
     * \@default false
     * \@usage [canBeApproximative]="true"
     * @type {?}
     */
    InputDateApproxComponent.prototype.canBeApproximative;
    /**
     * FormGroup approximative date label
     * \@default 'Approximative'
     * @type {?}
     */
    InputDateApproxComponent.prototype.dateApproxLabel;
    /**
     * FormGroup approximative date checkbox control name, required if approximative date
     * @type {?}
     */
    InputDateApproxComponent.prototype.dateApproxCheckboxName;
    /**
     * Approximative date format
     * \@values {known: 'FF/FF/FFFF', dayUnknown: '00/FF/FFFF', dayMonthUnknown: '00/00/FFFF'}
     * @type {?}
     */
    InputDateApproxComponent.prototype.dateApproxMasks;
    /**
     * FormGroup approximative date mask hidden control name, required if approximative date
     * @type {?}
     */
    InputDateApproxComponent.prototype.dateApproxMaskName;
    /**
     * max value for date DD/MM/YYY or 'now'
     * @type {?}
     */
    InputDateApproxComponent.prototype.maxDate;
    /**
     * Error message if date > max value
     * @type {?}
     */
    InputDateApproxComponent.prototype.maxDateErrorMessage;
    /**
     * min value for date DD/MM/YYY
     * @type {?}
     */
    InputDateApproxComponent.prototype.minDate;
    /**
     * Error message if date < min value
     * @type {?}
     */
    InputDateApproxComponent.prototype.minDateErrorMessage;
    /** @type {?} */
    InputDateApproxComponent.prototype.crossFieldsMinDateValidator;
    /** @type {?} */
    InputDateApproxComponent.prototype.crossFieldsMaxDateValidator;
    /** @type {?} */
    InputDateApproxComponent.prototype.crossFieldsDateValidator;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtZGF0ZS1hcHByb3guY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5lZi11aS8iLCJzb3VyY2VzIjpbImxpYi9mb3Jtcy9pbnB1dC1kYXRlLWFwcHJveC9pbnB1dC1kYXRlLWFwcHJveC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQStDLE1BQU0sZUFBZSxDQUFDO0FBQzlGLE9BQU8sRUFBRSxTQUFTLEVBQWUsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHcEUsT0FBTyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxvQkFBb0IsR0FBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzVFLE9BQU8sTUFBTSxNQUFNLFFBQVEsQ0FBQztBQUc1QjtJQXdMRTtRQUFBLGlCQUFnQjtRQTNLUixhQUFRLEdBQWlCLElBQUksT0FBTyxFQUFFLENBQUM7UUFDdkMscUJBQWdCLEdBQUcsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUMsQ0FBQztRQUMxRCxpQkFBWSxHQUFHLEtBQUssQ0FBQzs7OztRQVNaLGFBQVEsR0FBRyxJQUFJLENBQUM7Ozs7UUFHaEIsYUFBUSxHQUFHLEtBQUssQ0FBQzs7Ozs7UUFLakIsbUJBQWMsR0FBRyxLQUFLLENBQUM7Ozs7O1FBUXZCLGFBQVEsR0FBRyxNQUFNLENBQUM7Ozs7O1FBS2xCLG1CQUFjLEdBQUcsSUFBSSxDQUFDOzs7OztRQVF0QixlQUFVLEdBQUcsTUFBTSxDQUFDOzs7OztRQUtwQixxQkFBZ0IsR0FBRyxJQUFJLENBQUM7Ozs7O1FBV3hCLGNBQVMsR0FBRyxPQUFPLENBQUM7Ozs7O1FBS3BCLG9CQUFlLEdBQUcsTUFBTSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7UUFzQnpCLGlCQUFZLEdBQWlCO1lBQ3BDLEVBQUUs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Ozs7O0lBRy9CLDZDQUEyQjs7Ozs7O0lBSzNCLDhDQUE2Qjs7Ozs7O0lBSzdCLG9EQUFpQzs7Ozs7SUFHakMsNENBQTBCOzs7OztJQUcxQixnREFBK0I7Ozs7OztJQUsvQiw2Q0FBNkI7Ozs7OztJQUs3QixtREFBa0M7Ozs7O0lBSWxDLHlDQUFvQjs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWtCcEIsZ0RBYUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBc0JGLDRDQWlCRTs7Ozs7OztJQU1GLHNEQUFvQzs7Ozs7O0lBS3BDLG1EQUEyQzs7Ozs7SUFHM0MsMERBQXlDOzs7Ozs7SUFLekMsbURBQTBHOzs7OztJQUcxRyxzREFBcUM7Ozs7O0lBR3JDLDJDQUEwQjs7Ozs7SUFHMUIsdURBQXNDOzs7OztJQUd0QywyQ0FBMEI7Ozs7O0lBRzFCLHVEQUFxQzs7SUF5RHJDLCtEQVFDOztJQUVELCtEQVNDOztJQW9CRCw0REFzQkMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBbmd1bGFyXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQsIE9uRGVzdHJveSwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIFZhbGlkYXRvckZuLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgU2VsZWN0SXRlbSB9IGZyb20gJ3ByaW1lbmcvYXBpJztcbmltcG9ydCB7IERhdGVFcnJvck1lc3NhZ2UgfSBmcm9tICcuLi9tb2RlbHMvZGF0ZS1lcnJvci1tZXNzYWdlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRha2VVbnRpbCwgc3RhcnRXaXRoLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCx9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IGNvbXBvbmVudE5lZWRzUmVzb2x1dGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvc3JjL21ldGFkYXRhL3Jlc291cmNlX2xvYWRpbmcnO1xuXG5AQ29tcG9uZW50KHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICdhbmVmLWlucHV0LWRhdGUtYXBwcm94JyxcbiAgdGVtcGxhdGVVcmw6ICcuL2lucHV0LWRhdGUtYXBwcm94LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vaW5wdXQtZGF0ZS1hcHByb3guY29tcG9uZW50LnNjc3MnXSxcbn0pXG5cbi8qKlxuICogUmVhY3RpdmVGb3JtIERhdGUgSW5wdXQgLSBTw6lqb3VyXG4gKiBDb21wb3NlZCB3aXRoIGEgdGV4dCBpbnB1dCBmb3IgdGhlIGRheSwgYSBkcm9wZG93biBmb3IgdGhlIG1vbnRoLCBhIHRleHQgaW5wdXQgZm9yIHRoZSB5ZWFyXG4gKiBBcHByb3hpbWF0aXZlIGRhdGUgb3B0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dERhdGVBcHByb3hDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcbiAgcHJpdmF0ZSBub3RpZmllcjogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKTtcbiAgcHJpdmF0ZSB1bmtub3duTW9udGhJdGVtID0ge2xhYmVsOiAnSW5jb25udScsIHZhbHVlOiAnaSd9O1xuICBpc0RhdGVBcHByb3ggPSBmYWxzZTtcblxuICAvKiogRm9ybUdyb3VwIG5hbWUgKi9cbiAgQElucHV0KCkgZm9ybUdyb3VwOiBGb3JtR3JvdXA7XG5cbiAgLyoqIEZvcm1Hcm91cCBsYWJlbCAqL1xuICBASW5wdXQoKSBsYWJlbDogc3RyaW5nO1xuXG4gIC8qKiBJcyBGb3JtR3JvdXAgcmVxdWlyZWQgKi9cbiAgQElucHV0KCkgcmVxdWlyZWQgPSB0cnVlO1xuXG4gIC8qKiBJcyBGb3JtR3JvdXAgcmVhZG9ubHkgKi9cbiAgQElucHV0KCkgcmVhZG9ubHkgPSBmYWxzZTtcblxuICAvKiogRGVmYXVsdCBkYXRlIHZhbHVlIGRpc3BsYXllZCBpbiByZWFkb25seSBtb2RlXG4gICAqIEBkZWZhdWx0ICdOL0EnXG4gICAqL1xuICBASW5wdXQoKSBkZWZhdWx0RGlzcGxheSA9ICdOL0EnO1xuXG4gIC8qKiBGb3JtR3JvdXAgZGF5IGNvbnRyb2wgbmFtZSAqL1xuICBASW5wdXQoKSBkYXlOYW1lOiBzdHJpbmc7XG5cbiAgLyoqIEZvcm1Hcm91cCBkYXkgY29udHJvbCBsYWJlbFxuICAgKiBAZGVmYXVsdCAnSm91cidcbiAgICovXG4gIEBJbnB1dCgpIGRheUxhYmVsID0gJ0pvdXInO1xuXG4gIC8qKiBGb3JtR3JvdXAgZGF5IGNvbnRyb2wgcGxhY2Vob2xkZXJcbiAgICogQGRlZmF1bHQgJ0pKJ1xuICAgKi9cbiAgQElucHV0KCkgZGF5UGxhY2Vob2xkZXIgPSAnSkonO1xuXG4gIC8qKiBGb3JtR3JvdXAgbW9udGggY29udHJvbCBuYW1lICovXG4gIEBJbnB1dCgpIG1vbnRoTmFtZTogc3RyaW5nO1xuXG4gIC8qKiBGb3JtR3JvdXAgbW9udGggY29udHJvbCBsYWJlbFxuICAgKiBAZGVmYXVsdCAnTW9pcydcbiAgICovXG4gIEBJbnB1dCgpIG1vbnRoTGFiZWwgPSAnTW9pcyc7XG5cbiAgLyoqIEZvcm1Hcm91cCBkYXkgY29udHJvbCBwbGFjZWhvbGRlclxuICAgKiBAZGVmYXVsdCAnTU0nXG4gICAqL1xuICBASW5wdXQoKSBtb250aFBsYWNlaG9sZGVyID0gJ01NJztcblxuICAvKiogRm9ybUdyb3VwIHllYXIgY29udHJvbCBuYW1lICovXG4gIEBJbnB1dCgpIHllYXJOYW1lOiBzdHJpbmc7XG5cbiAgLyoqIFB1dHMgYSByZXF1aXJlZCAqIG1hcmsgYXNpZGUgdGhlIHllYXIgY29udHJvbCAqL1xuICBASW5wdXQoKSB5ZWFyUmVxdWlyZWQ6IGJvb2xlYW47XG5cbiAgLyoqIEZvcm1Hcm91cCB5ZWFyIGNvbnRyb2wgbGFiZWxcbiAgICogQGRlZmF1bHQgJ0FubsOpZSdcbiAgICovXG4gIEBJbnB1dCgpIHllYXJMYWJlbCA9ICdBbm7DqWUnO1xuXG4gIC8qKiBGb3JtR3JvdXAgeWVhciBjb250cm9sIHBsYWNlaG9sZGVyXG4gICAqIEBkZWZhdWx0ICdBQUFBJ1xuICAgKi9cbiAgQElucHV0KCkgeWVhclBsYWNlaG9sZGVyID0gJ0FBQUEnO1xuXG4gIC8qKiBtb2RlbCBwcm9wZXJ0eSBmb3IgdXNhZ2Ugd2l0aCBuZ01vZGVsIHRvIGJlIGRlZmluZWRcbiAgICovXG4gIEBJbnB1dCgpIG1vZGVsOiBhbnk7XG5cbiAgLyoqIEZvcm1Hcm91cCBtb250aCBjb250cm9sIGRyb3Bkb3duIG9wdGlvbnNcbiAgICogQGRlZmF1bHQgU2VsZWN0SXRlbVtdID0gW1xuICAgKiB7IGxhYmVsOiAnSmFudmllcicsIHZhbHVlOiAxIH0sXG4gICAqIHsgbGFiZWw6ICdGw6l2cmllcicsIHZhbHVlOiAyIH0sXG4gICAqIHsgbGFiZWw6ICdNYXJzJywgdmFsdWU6IDMgfSxcbiAgICogeyBsYWJlbDogJ0F2cmlsJywgdmFsdWU6IDQgfSxcbiAgICogeyBsYWJlbDogJ01haScsIHZhbHVlOiA1IH0sXG4gICAqIHsgbGFiZWw6ICdKdWluJywgdmFsdWU6IDYgfSxcbiAgICogeyBsYWJlbDogJ0p1aWxsZXQnLCB2YWx1ZTogNyB9LFxuICAgKiB7IGxhYmVsOiAnQW/Du3QnLCB2YWx1ZTogOCB9LFxuICAgKiB7IGxhYmVsOiAnU2VwdGVtYnJlJywgdmFsdWU6IDkgfSxcbiAgICogeyBsYWJlbDogJ09jdG9icmUnLCB2YWx1ZTogMTAgfSxcbiAgICogeyBsYWJlbDogJ05vdmVtYnJlJywgdmFsdWU6IDExIH0sXG4gICAqIHsgbGFiZWw6ICdEw6ljZW1icmUnLCB2YWx1ZTogMTIgfVxuICAgKiBdXG4gICAqL1xuICBASW5wdXQoKSBtb250aE9wdGlvbnM6IFNlbGVjdEl0ZW1bXSA9IFtcbiAgICB7IGxhYmVsOiAnSmFudmllcicsIHZhbHVlOiAxIH0sXG4gICAgeyBsYWJlbDogJ0bDqXZyaWVyJywgdmFsdWU6IDIgfSxcbiAgICB7IGxhYmVsOiAnTWFycycsIHZhbHVlOiAzIH0sXG4gICAgeyBsYWJlbDogJ0F2cmlsJywgdmFsdWU6IDQgfSxcbiAgICB7IGxhYmVsOiAnTWFpJywgdmFsdWU6IDUgfSxcbiAgICB7IGxhYmVsOiAnSnVpbicsIHZhbHVlOiA2IH0sXG4gICAgeyBsYWJlbDogJ0p1aWxsZXQnLCB2YWx1ZTogNyB9LFxuICAgIHsgbGFiZWw6ICdBb8O7dCcsIHZhbHVlOiA4IH0sXG4gICAgeyBsYWJlbDogJ1NlcHRlbWJyZScsIHZhbHVlOiA5IH0sXG4gICAgeyBsYWJlbDogJ09jdG9icmUnLCB2YWx1ZTogMTAgfSxcbiAgICB7IGxhYmVsOiAnTm92ZW1icmUnLCB2YWx1ZTogMTEgfSxcbiAgICB7IGxhYmVsOiAnRMOpY2VtYnJlJywgdmFsdWU6IDEyIH1cbiAgXTtcblxuICAvKiogRm9ybUdyb3VwIHZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZXNcbiAgICogQGRlZmF1bHQgIERhdGVFcnJvck1lc3NhZ2UgPSB7XG4gICAqICAgICBkYXk6IHtcbiAgICogICAgICAgcmVxdWlyZWQ6ICdMZSBqb3VyIGVzdCByZXF1aXMnLFxuICAgKiAgICAgICBwYXR0ZXJuOiAnTGUgam91ciBkb2l0IMOqdHJlIHVuIG5vbWJyZScsXG4gICAqICAgICAgIGxlbmd0aDogJ0xlIGpvdXIgZG9pdCBjb250ZW5pciAyIGNoaWZmcmVzIGF1IG1heGltdW0nLFxuICAgKiAgICAgICBtaW5NYXg6ICdMZSBqb3VyIGRvaXQgw6p0cmUgY29tcHJpcyBlbnRyZSAxIGV0IDMxJ1xuICAgKiAgICAgfSxcbiAgICogICAgIG1vbnRoOiB7XG4gICAqICAgICAgIHJlcXVpcmVkOiAnTGUgbW9pcyBlc3QgcmVxdWlzJ1xuICAgKiAgICAgfSxcbiAgICogICAgIHllYXI6IHtcbiAgICogICAgICAgcmVxdWlyZWQ6ICdMXFwnYW5uw6llIGVzdCByZXF1aXNlJyxcbiAgICogICAgICAgcGF0dGVybjogJ0xcXCdhbm7DqWUgZG9pdCDDqnRyZSB1biBub21icmUnLFxuICAgKiAgICAgICBsZW5ndGg6ICdMXFwnYW5uw6llIGRvaXQgY29udGVuaXIgNCBjaGlmZnJlcydcbiAgICogICAgIH0sXG4gICAqICAgICBpbnZhbGlkOiAnTGEgZGF0ZSBlc3QgaW52YWxpZGUnLFxuICAgKiAgICAgcmVxdWlyZWQ6ICdDZSBjaGFtcCBlc3Qgb2JsaWdhdG9pcmUuJ1xuICAgKiAgIH1cbiAgICovXG4gIEBJbnB1dCgpIG1lc3NhZ2VzOiBEYXRlRXJyb3JNZXNzYWdlID0ge1xuICAgIGRheToge1xuICAgICAgcmVxdWlyZWQ6ICdMZSBqb3VyIGVzdCByZXF1aXMnLFxuICAgICAgcGF0dGVybjogJ0xlIGpvdXIgZG9pdCDDqnRyZSB1biBub21icmUnLFxuICAgICAgbGVuZ3RoOiAnTGUgam91ciBkb2l0IGNvbnRlbmlyIDIgY2hpZmZyZXMgYXUgbWF4aW11bScsXG4gICAgICBtaW5NYXg6ICdMZSBqb3VyIGRvaXQgw6p0cmUgY29tcHJpcyBlbnRyZSAxIGV0IDMxJ1xuICAgIH0sXG4gICAgbW9udGg6IHtcbiAgICAgIHJlcXVpcmVkOiAnTGUgbW9pcyBlc3QgcmVxdWlzJ1xuICAgIH0sXG4gICAgeWVhcjoge1xuICAgICAgcmVxdWlyZWQ6ICdMXFwnYW5uw6llIGVzdCByZXF1aXNlJyxcbiAgICAgIHBhdHRlcm46ICdMXFwnYW5uw6llIGRvaXQgw6p0cmUgdW4gbm9tYnJlJyxcbiAgICAgIGxlbmd0aDogJ0xcXCdhbm7DqWUgZG9pdCBjb250ZW5pciA0IGNoaWZmcmVzJ1xuICAgIH0sXG4gICAgaW52YWxpZDogJ0xhIGRhdGUgZXN0IGludmFsaWRlJyxcbiAgICByZXF1aXJlZDogJ0NlIGNoYW1wIGVzdCBvYmxpZ2F0b2lyZS4nXG4gIH07XG5cbiAgLyoqIENhbiB0aGUgZGF0ZSBiZSBhcHByb3hpbWF0aXZlIG9yIG5vdFxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKiBAdXNhZ2UgW2NhbkJlQXBwcm94aW1hdGl2ZV09XCJ0cnVlXCJcbiAgICovXG4gIEBJbnB1dCgpIGNhbkJlQXBwcm94aW1hdGl2ZSA9IGZhbHNlO1xuXG4gICAvKiogRm9ybUdyb3VwIGFwcHJveGltYXRpdmUgZGF0ZSBsYWJlbFxuICAgICogQGRlZmF1bHQgJ0FwcHJveGltYXRpdmUnXG4gICAgKi9cbiAgQElucHV0KCkgZGF0ZUFwcHJveExhYmVsID0gJ0FwcHJveGltYXRpdmUnO1xuXG4gIC8qKiBGb3JtR3JvdXAgYXBwcm94aW1hdGl2ZSBkYXRlIGNoZWNrYm94IGNvbnRyb2wgbmFtZSwgcmVxdWlyZWQgaWYgYXBwcm94aW1hdGl2ZSBkYXRlICovXG4gIEBJbnB1dCgpIGRhdGVBcHByb3hDaGVja2JveE5hbWU/OiBzdHJpbmc7XG5cbiAgLyoqIEFwcHJveGltYXRpdmUgZGF0ZSBmb3JtYXRcbiAgICogQHZhbHVlcyB7a25vd246ICdGRi9GRi9GRkZGJywgZGF5VW5rbm93bjogJzAwL0ZGL0ZGRkYnLCBkYXlNb250aFVua25vd246ICcwMC8wMC9GRkZGJ31cbiAgICovXG4gIEBJbnB1dCgpIGRhdGVBcHByb3hNYXNrcyA9IHtrbm93bjogJ0ZGL0ZGL0ZGRkYnLCBkYXlVbmtub3duOiAnMDAvRkYvRkZGRicsIGRheU1vbnRoVW5rbm93bjogJzAwLzAwL0ZGRkYnfTtcblxuICAvKiogRm9ybUdyb3VwIGFwcHJveGltYXRpdmUgZGF0ZSBtYXNrIGhpZGRlbiBjb250cm9sIG5hbWUsIHJlcXVpcmVkIGlmIGFwcHJveGltYXRpdmUgZGF0ZSAqL1xuICBASW5wdXQoKSBkYXRlQXBwcm94TWFza05hbWU/OiBzdHJpbmc7XG5cbiAgLyoqIG1heCB2YWx1ZSBmb3IgZGF0ZSBERC9NTS9ZWVkgb3IgJ25vdycgKi9cbiAgQElucHV0KCkgbWF4RGF0ZT8gOiBzdHJpbmdcblxuICAvKiogRXJyb3IgbWVzc2FnZSBpZiBkYXRlID4gbWF4IHZhbHVlICovXG4gIEBJbnB1dCgpIG1heERhdGVFcnJvck1lc3NhZ2U/IDogc3RyaW5nXG5cbiAgLyoqIG1pbiB2YWx1ZSBmb3IgZGF0ZSBERC9NTS9ZWVkgICovXG4gIEBJbnB1dCgpIG1pbkRhdGU/IDogc3RyaW5nXG5cbiAgLyoqIEVycm9yIG1lc3NhZ2UgaWYgZGF0ZSA8IG1pbiB2YWx1ZSAqL1xuICBASW5wdXQoKSBtaW5EYXRlRXJyb3JNZXNzYWdlPyA6c3RyaW5nXG5cbiAgY29uc3RydWN0b3IoKSB7fVxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYoIGNoYW5nZXNbJ3JlYWRvbmx5J10gJiYgY2hhbmdlc1sncmVhZG9ubHknXS5wcmV2aW91c1ZhbHVlICE9IGNoYW5nZXNbJ3JlYWRvbmx5J10uY3VycmVudFZhbHVlKSB7XG4gICAgICB0aGlzLnNldENoZWNrYm94U3R5bGUoY2hhbmdlc1sncmVhZG9ubHknXS5jdXJyZW50VmFsdWUpO1xuICAgICAgaWYgKHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmRhdGVBcHByb3hNYXNrTmFtZSkgJiYgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF0ZUFwcHJveE1hc2tOYW1lKS52YWx1ZSA9PT0gdGhpcy5kYXRlQXBwcm94TWFza3MuZGF5TW9udGhVbmtub3duKSB7XG5cbiAgICAgICAgdGhpcy5lZGl0TW9udGhPcHRpb25zKHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5yZWFkb25seSkge1xuICAgICAgdGhpcy5hZGREYXlDb250cm9sTWluTWF4VmFsaWRhdG9yKCk7XG4gICAgICB0aGlzLmFkZEZvcm1Hcm91cFZhbGlkYXRvcnMoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jYW5CZUFwcHJveGltYXRpdmUgJiYgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF0ZUFwcHJveENoZWNrYm94TmFtZSkpIHtcbiAgICAgIHRoaXMuZGF0ZUFwcHJveENoZWNrYm94Q2hhbmdlKCk7XG4gICAgICB0aGlzLm1vbnRoT3B0aW9uQ2hhbmdlKCk7XG4gICAgfVxuICB9XG5cbiAgYWRkRGF5Q29udHJvbE1pbk1heFZhbGlkYXRvcigpIHtcbiAgICBjb25zdCB2YWxpZGF0b3JzQXJyYXkgPSBbXTtcblxuICAgIHZhbGlkYXRvcnNBcnJheS5wdXNoKFZhbGlkYXRvcnMubWluKDEpLCBWYWxpZGF0b3JzLm1heCgzMSkpXG5cbiAgICBpZiAodGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF5TmFtZSkudmFsaWRhdG9yKSB7XG4gICAgICB2YWxpZGF0b3JzQXJyYXkucHVzaCh0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXlOYW1lKS52YWxpZGF0b3IpO1xuICAgIH1cblxuICAgIHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmRheU5hbWUpLnNldFZhbGlkYXRvcnModmFsaWRhdG9yc0FycmF5KTtcbiAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXlOYW1lKS51cGRhdGVWYWx1ZUFuZFZhbGlkaXR5KCk7XG4gIH1cblxuICBhZGRGb3JtR3JvdXBWYWxpZGF0b3JzKCkge1xuICAgIGNvbnN0IHZhbGlkYXRvcnNBcnJheSA9IFtdO1xuXG4gICAgdmFsaWRhdG9yc0FycmF5LnB1c2godGhpcy5jcm9zc0ZpZWxkc0RhdGVWYWxpZGF0b3IpO1xuXG4gICAgaWYgKHRoaXMubWluRGF0ZSAmJiB0aGlzLm1pbkRhdGVFcnJvck1lc3NhZ2UpIHtcbiAgICAgIHZhbGlkYXRvcnNBcnJheS5wdXNoKHRoaXMuY3Jvc3NGaWVsZHNNaW5EYXRlVmFsaWRhdG9yKVxuICAgIH1cbiAgICBpZih0aGlzLm1heERhdGUgJiYgdGhpcy5tYXhEYXRlRXJyb3JNZXNzYWdlKSB7XG4gICAgICB2YWxpZGF0b3JzQXJyYXkucHVzaCh0aGlzLmNyb3NzRmllbGRzTWF4RGF0ZVZhbGlkYXRvcilcbiAgICB9XG4gICAgaWYodGhpcy5mb3JtR3JvdXAudmFsaWRhdG9yKSB7XG4gICAgICB2YWxpZGF0b3JzQXJyYXkucHVzaCh0aGlzLmZvcm1Hcm91cC52YWxpZGF0b3IpXG4gICAgfVxuXG4gICAgdGhpcy5mb3JtR3JvdXAuc2V0VmFsaWRhdG9ycyh2YWxpZGF0b3JzQXJyYXkpO1xuICAgIHRoaXMuZm9ybUdyb3VwLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcbiAgfVxuXG4gIGNyb3NzRmllbGRzTWluRGF0ZVZhbGlkYXRvcjogVmFsaWRhdG9yRm4gPSAoZmc6IEZvcm1Hcm91cCkgPT4ge1xuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMuZ2V0RmllbGRzKCk7XG4gICAgaWYobW9tZW50KFtmaWVsZHMueWVhciwgZmllbGRzLm1vbnRoLCBmaWVsZHMuZGF5XSkuaXNWYWxpZCgpICYmICF0aGlzLmZvcm1Db250YWluc0Vycm9ycygpKXtcbiAgICAgIGlmKG1vbWVudChbZmllbGRzLnllYXIsIGZpZWxkcy5tb250aCwgZmllbGRzLmRheV0pIDwgbW9tZW50KHRoaXMubWluRGF0ZSwgJ0REL01NL1lZWVknKSkge1xuICAgICAgICByZXR1cm4geyB0b29PbGQgOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjcm9zc0ZpZWxkc01heERhdGVWYWxpZGF0b3I6IFZhbGlkYXRvckZuID0gKGZnOiBGb3JtR3JvdXApID0+IHtcbiAgICBjb25zdCBmaWVsZHMgPSB0aGlzLmdldEZpZWxkcygpO1xuICAgIGlmKG1vbWVudChbZmllbGRzLnllYXIsIGZpZWxkcy5tb250aCwgZmllbGRzLmRheV0pLmlzVmFsaWQoKSAmJiAhdGhpcy5mb3JtQ29udGFpbnNFcnJvcnMoKSl7XG4gICAgICBjb25zdCBkYXRlID0gbW9tZW50KFtmaWVsZHMueWVhciwgZmllbGRzLm1vbnRoLCBmaWVsZHMuZGF5XSk7XG4gICAgICBpZih0aGlzLm1heERhdGUgPT09ICdub3cnICYmIGRhdGUgPiBtb21lbnQoKSB8fCBkYXRlID4gbW9tZW50KHRoaXMubWF4RGF0ZSwgJ0REL01NL1lZWVknKSkge1xuICAgICAgICByZXR1cm4geyB0b29GdXR1cmUgOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIGdldEZpZWxkcygpIHtcbiAgICByZXR1cm4geyBkYXk6IHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmRheU5hbWUpLnZhbHVlLCBtb250aDogdGhpcy5nZXRNb250aFZhbHVlKHRydWUpLCB5ZWFyOiB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy55ZWFyTmFtZSkudmFsdWUgfVxuICB9XG5cbiAgYXJlRmllbGRzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5nZXRGaWVsZHMoKTtcbiAgICByZXR1cm4gIWZpZWxkcy5kYXkgJiYgIWZpZWxkcy5tb250aCAmJiAhZmllbGRzLnllYXI7XG4gIH1cblxuICBhcmVGaWVsZHNGaWxsZWQoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5nZXRGaWVsZHMoKTtcbiAgICByZXR1cm4gZmllbGRzLmRheSAhPSBudWxsICYmIGZpZWxkcy5tb250aCA+IC0xICYmIGZpZWxkcy55ZWFyICE9IG51bGw7XG4gIH1cblxuICBhcmVGaWVsZHNUb3VjaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy55ZWFyTmFtZSkudG91Y2hlZCAmJiB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy55ZWFyTmFtZSkudG91Y2hlZCAmJiB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy55ZWFyTmFtZSkudG91Y2hlZDtcbiAgfVxuXG4gIGNyb3NzRmllbGRzRGF0ZVZhbGlkYXRvcjogVmFsaWRhdG9yRm4gPSAoZmc6IEZvcm1Hcm91cCkgPT4ge1xuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMuZ2V0RmllbGRzKCk7XG4gICAgaWYgKCFtb21lbnQoW2ZpZWxkcy55ZWFyLCBmaWVsZHMubW9udGgsIGZpZWxkcy5kYXldKS5pc1ZhbGlkKCkpIHtcbiAgICAgIGlmICh0aGlzLmFyZUZpZWxkc0ZpbGxlZCgpKXtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMueWVhck5hbWUpLnNldEVycm9ycyh7IGludmFsaWREYXRlOiB0cnVlIH0sIHsgZW1pdEV2ZW50OiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5tb250aE5hbWUpLnNldEVycm9ycyh7IGludmFsaWREYXRlOiB0cnVlIH0sIHsgZW1pdEV2ZW50OiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXlOYW1lKS5zZXRFcnJvcnMoeyBpbnZhbGlkRGF0ZTogdHJ1ZSB9LCB7IGVtaXRFdmVudDogdHJ1ZSB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5mb3JtR3JvdXAuc2V0RXJyb3JzKHsgaW52YWxpZERhdGU6IHRydWUgfSk7XG5cbiAgICAgIGlmICgodGhpcy5yZXF1aXJlZCB8fCB0aGlzLnllYXJSZXF1aXJlZCApICYmIHRoaXMuYXJlRmllbGRzRmlsbGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHsgaW52YWxpZERhdGUgOiB0cnVlIH07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtb21lbnQoW2ZpZWxkcy55ZWFyLCBmaWVsZHMubW9udGgsIGZpZWxkcy5kYXldKS5pc1ZhbGlkKCkpe1xuICAgICAgdGhpcy5mb3JtR3JvdXAuc2V0RXJyb3JzKG51bGwpO1xuICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMueWVhck5hbWUpLnNldEVycm9ycyhudWxsKTtcbiAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLm1vbnRoTmFtZSkuc2V0RXJyb3JzKG51bGwpO1xuICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF5TmFtZSkuc2V0RXJyb3JzKG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMubm90aWZpZXIubmV4dCgpO1xuICAgIHRoaXMubm90aWZpZXIudW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgZm9ybSBpcyBpbnZhbGlkICovXG4gIGZvcm1Db250YWluc0Vycm9ycygpOiBib29sZWFuIHtcbiAgICBjb25zdCBjb250cm9sTmFtZXMgPSBbdGhpcy5kYXlOYW1lLCB0aGlzLm1vbnRoTmFtZSwgdGhpcy55ZWFyTmFtZV07XG4gICAgcmV0dXJuIGNvbnRyb2xOYW1lcy5zb21lKGNvbnRyb2xOYW1lID0+ICB7XG4gICAgICByZXR1cm4gdGhpcy5jb250cm9sQ29udGFpbnNFcnJvcnMoY29udHJvbE5hbWUpIH0pIDtcbiAgfVxuXG4gIGZvcm1FcnJvcigpOiBib29sZWFuIHtcbiAgICAgcmV0dXJuIHRoaXMuZm9ybUdyb3VwLnRvdWNoZWQgJiYgdGhpcy5mb3JtR3JvdXAuZXJyb3JzICE9PSBudWxsO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiBhIGNvbnRyb2wgaXMgaW52YWxpZCAqL1xuICBjb250cm9sQ29udGFpbnNFcnJvcnMoY29udHJvbE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZvcm1Hcm91cCAmJiAodGhpcy5mb3JtR3JvdXAuY29udHJvbHNbY29udHJvbE5hbWVdLmVycm9ycyAhPT0gbnVsbCAmJiAodGhpcy5mb3JtR3JvdXAuY29udHJvbHNbY29udHJvbE5hbWVdLmRpcnR5IHx8IHRoaXMuZm9ybUdyb3VwLmNvbnRyb2xzW2NvbnRyb2xOYW1lXS50b3VjaGVkKSk7XG4gIH1cbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiBjb250cm9sIHZhbHVlIGhhcyBwYXR0ZXJuIGVycm9ycyAqL1xuICBoYXNQYXR0ZXJuRXJyb3IoY29udHJvbE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluc0Vycm9ycyhjb250cm9sTmFtZSkgJiYgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbY29udHJvbE5hbWVdLmVycm9ycy5wYXR0ZXJuO1xuICB9XG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgY29udHJvbCB2YWx1ZSBpcyBpbmZlcmlvciB0byBjb250cm9sIG1pbiB2YWx1ZSBvciBzdXBlcmlvciB0byBjb250cm9sIG1heCB2YWx1ZSAqL1xuICBoYXNNaW5NYXhFcnJvcihjb250cm9sTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbENvbnRhaW5zRXJyb3JzKGNvbnRyb2xOYW1lKSAmJlxuICAgICAgKHRoaXMuZm9ybUdyb3VwLmNvbnRyb2xzW2NvbnRyb2xOYW1lXS5lcnJvcnMubWluIHx8IHRoaXMuZm9ybUdyb3VwLmNvbnRyb2xzW2NvbnRyb2xOYW1lXS5lcnJvcnMubWF4KTtcbiAgfVxuICAvKiogUmV0dXJucyB0cnVlIGlmIGNvbnRyb2wgdmFsdWUgbGVuZ3RoIGlzIGluZmVyaW9yIHRvIGNvbnRyb2wgbWluIHZhbHVlIGxlbmd0aCBvciBzdXBlcmlvciB0byBjb250cm9sIG1heCB2YWx1ZSBsZW5ndGggKi9cbiAgaGFzTGVuZ3RoRXJyb3IoY29udHJvbE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluc0Vycm9ycyhjb250cm9sTmFtZSkgJiZcbiAgICAgICh0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZXJyb3JzLm1pbmxlbmd0aCB8fCB0aGlzLmZvcm1Hcm91cC5jb250cm9sc1tjb250cm9sTmFtZV0uZXJyb3JzLm1heGxlbmd0aCk7XG4gIH1cbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiBjb250cm9sIGlzIHJlcXVpcmVkIGJ1dCBub3QgZmlsbGVkICovXG4gIGhhc1JlcXVpcmVkRXJyb3IoY29udHJvbE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluc0Vycm9ycyhjb250cm9sTmFtZSkgJiYgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbY29udHJvbE5hbWVdLmVycm9ycy5yZXF1aXJlZDtcbiAgfVxuICAvKiogUmV0dXJucyB0cnVlIGlmIGNvbnRyb2wgaXMgbm90IGEgdmFsaWQgZGF0ZSAqL1xuICBoYXNJbnZhbGlkRGF0ZUVycm9yKGNvbnRyb2xOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sQ29udGFpbnNFcnJvcnMoY29udHJvbE5hbWUpICYmIHRoaXMuZm9ybUdyb3VwLmNvbnRyb2xzW2NvbnRyb2xOYW1lXS5lcnJvcnMuaW52YWxpZERhdGU7XG4gIH1cblxuICAvKiogUmV0dXJucyB0cnVlIGlmIGZvcm0gZG9lcyBub3QgaGF2ZSBhIHZhbGlkIGRhdGUgKi9cbiAgaGFzRm9ybUdyb3VwSW52YWxpZGF0ZUVycm9yKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZvcm1Hcm91cC5lcnJvcnMgJiYgdGhpcy5mb3JtR3JvdXAuZXJyb3JzLmludmFsaWREYXRlO1xuICB9XG5cbiAgaGFzRnV0dXJlRGF0ZUVycm9yKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZvcm1Hcm91cC5lcnJvcnMgJiYgdGhpcy5mb3JtR3JvdXAuZXJyb3JzLnRvb0Z1dHVyZTtcbiAgfVxuXG4gIGhhc1Rvb09sZERhdGVFcnJvcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtR3JvdXAuZXJyb3JzICYmIHRoaXMuZm9ybUdyb3VwLmVycm9ycy50b29PbGQ7XG5cbiAgfVxuXG4gIGlzQWxsRmllbGRzRmlsbGVkKCkgOmJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmhhc1JlcXVpcmVkRXJyb3IodGhpcy55ZWFyTmFtZSlcbiAgICAgICAgJiYgdGhpcy5oYXNSZXF1aXJlZEVycm9yKHRoaXMubW9udGhOYW1lKVxuICAgICAgICAmJiB0aGlzLmhhc1JlcXVpcmVkRXJyb3IodGhpcy5kYXlOYW1lKTtcbiAgfVxuXG4gIC8qKiogUmV0dXJucyBGb3JtR3JvdXAgbW9udGggZmllbGQgdmFsdWUgKi9cbiAgcHJpdmF0ZSBnZXRNb250aFZhbHVlKGNvcnJlY3RGb3JNb21lbnQ/OiBib29sZWFuKSB7XG4gICAgbGV0ICB2YWx1ZSA9IHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLm1vbnRoTmFtZSkudmFsdWU7XG4gICAgaWYgKHZhbHVlID09PSB0aGlzLnVua25vd25Nb250aEl0ZW0udmFsdWUpIHtcbiAgICAgIHZhbHVlID0gMTtcbiAgICB9XG4gICAgaWYgKGNvcnJlY3RGb3JNb21lbnQpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAtIDE7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKiBGb3JtYXQgZGF0ZSB0byBzdHJpbmcgZm9yIGRpc3BsYXkgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgbGV0IGRhdGVTdHJpbmc6IHN0cmluZztcblxuICAgIGNvbnN0IGRheSA9IHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmRheU5hbWUpLnZhbHVlO1xuICAgIGNvbnN0IG1vbnRoID0gdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMubW9udGhOYW1lKS52YWx1ZTtcbiAgICBjb25zdCB5ZWFyID0gdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMueWVhck5hbWUpLnZhbHVlO1xuXG4gICAgY29uc3Qgbm9uQXBwcm94QW5kRW1wdHkgPSAhdGhpcy5pc0RhdGVBcHByb3ggJiYgIWRheSAmJiAhbW9udGggJiYgIXllYXI7XG4gICAgY29uc3QgYXBwcm94QW5kRW1wdHkgPSB0aGlzLmlzRGF0ZUFwcHJveCAmJiAhbW9udGggJiYgIXllYXI7XG5cbiAgICBpZiAobm9uQXBwcm94QW5kRW1wdHkgfHwgYXBwcm94QW5kRW1wdHkpIHtcbiAgICAgIGRhdGVTdHJpbmcgPSAgdGhpcy5kZWZhdWx0RGlzcGxheTtcbiAgICB9IGVsc2Uge1xuICAgICAgbW9tZW50LnVwZGF0ZUxvY2FsZShtb21lbnQubG9jYWxlKCksIHsgaW52YWxpZERhdGU6IHRoaXMuZGVmYXVsdERpc3BsYXkgfSk7XG4gICAgICBkYXRlU3RyaW5nID0gbW9tZW50KFtOdW1iZXIoeWVhciksIE51bWJlcih0aGlzLmdldE1vbnRoVmFsdWUodHJ1ZSkpLCBOdW1iZXIoZGF5KV0pLmZvcm1hdCgnREQvTU0vWVlZWScpO1xuXG4gICAgICBpZiAoIW5vbkFwcHJveEFuZEVtcHR5ICYmICF0aGlzLmlzRGF0ZUFwcHJveCkge1xuICAgICAgICByZXR1cm4gZGF0ZVN0cmluZztcbiAgICAgIH0gZWxzZSBpZiAoIWFwcHJveEFuZEVtcHR5ICYmIHRoaXMuaXNEYXRlQXBwcm94KSB7XG4gICAgICAgIGNvbnN0IG1hc2sgPSB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXRlQXBwcm94TWFza05hbWUpLnZhbHVlO1xuICAgICAgICBjb25zdCBkYXRlU3RyaW5nQXJyYXkgPSBkYXRlU3RyaW5nLnNwbGl0KCcvJyk7XG4gICAgICAgIGlmIChtYXNrID09PSB0aGlzLmRhdGVBcHByb3hNYXNrcy5kYXlVbmtub3duKSB7XG4gICAgICAgICAgZGF0ZVN0cmluZ0FycmF5WzBdID0gJy0nO1xuICAgICAgICB9IGVsc2UgaWYgKG1hc2sgPT09IHRoaXMuZGF0ZUFwcHJveE1hc2tzLmRheU1vbnRoVW5rbm93bikge1xuICAgICAgICAgIGRhdGVTdHJpbmdBcnJheVswXSA9ICctJztcbiAgICAgICAgICBkYXRlU3RyaW5nQXJyYXlbMV0gPSAnLSc7XG4gICAgICAgIH1cbiAgICAgICAgZGF0ZVN0cmluZyA9IGRhdGVTdHJpbmdBcnJheS5qb2luKCcvJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRlU3RyaW5nO1xuICB9XG5cbiAgLyoqIFRyaWdnZXJzIGRhdGUgYXBwcm94IGVkaXRpbmcgZnVuY3Rpb25zIGZvbGxvd2luZyBkYXRlIGFwcHJveCBjaGVja2JveCB2YWx1ZXMgKi9cbiAgcHJpdmF0ZSBkYXRlQXBwcm94Q2hlY2tib3hDaGFuZ2UoKSB7XG4gICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF0ZUFwcHJveENoZWNrYm94TmFtZSkudmFsdWVDaGFuZ2VzXG4gICAgLnBpcGUoXG4gICAgICBzdGFydFdpdGgodGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF0ZUFwcHJveENoZWNrYm94TmFtZSkudmFsdWUpLFxuICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgIHRha2VVbnRpbCh0aGlzLm5vdGlmaWVyKVxuICAgICAgKVxuICAgIC5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLmlzRGF0ZUFwcHJveCA9IHZhbHVlO1xuICAgICAgdGhpcy5zZXREYXlWYWx1ZSh2YWx1ZSk7XG4gICAgICB0aGlzLmVkaXRNb250aE9wdGlvbnModmFsdWUpO1xuICAgICAgdGhpcy5zZXREYXRlQXBwcm94TWFzayh2YWx1ZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKiBUcmlnZ2VycyBTZXREYXRlQXBwcm94TUFzayBvbiBtb250aE9wdGlvbnMgY2hhbmdlICovXG4gIHByaXZhdGUgbW9udGhPcHRpb25DaGFuZ2UoKSB7XG4gICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMubW9udGhOYW1lKS52YWx1ZUNoYW5nZXNcbiAgICAucGlwZShcbiAgICAgIHN0YXJ0V2l0aCh0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5tb250aE5hbWUpLnZhbHVlKSxcbiAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICB0YWtlVW50aWwodGhpcy5ub3RpZmllcilcbiAgICAgIClcbiAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0RGF0ZUFwcHJveE1hc2sodGhpcy5pc0RhdGVBcHByb3gpO1xuICAgICAgdGhpcy5mb3JtR3JvdXAudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKiogU2V0cyBkYXkgdmFsdWUgdG8gMSBpZiBkYXRlIGlzIGFwcHJveGltYXRpdmUgKi9cbiAgcHJpdmF0ZSBzZXREYXlWYWx1ZSh2YWx1ZTogYm9vbGVhbikge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF5TmFtZSkuc2V0VmFsdWUoJzEnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmRhdGVBcHByb3hDaGVja2JveE5hbWUpLmRpcnR5KSB7XG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmRheU5hbWUpLnJlc2V0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEFkZHMgb3IgcmVtb3ZlICdJbmNvbm51JyBtb250aCBvcHRpb24gKi9cbiAgcHJpdmF0ZSBlZGl0TW9udGhPcHRpb25zKHZhbHVlOiBib29sZWFuKSB7XG4gICAgY29uc3QgaGFzVW5rbm93bk1vbnRoSXRlbSA9IHRoaXMubW9udGhPcHRpb25zLnNvbWUoIGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gdGhpcy51bmtub3duTW9udGhJdGVtLnZhbHVlKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGlmICghaGFzVW5rbm93bk1vbnRoSXRlbSkge1xuICAgICAgICB0aGlzLm1vbnRoT3B0aW9ucy51bnNoaWZ0KHRoaXMudW5rbm93bk1vbnRoSXRlbSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMuZGF0ZUFwcHJveE1hc2tOYW1lKS52YWx1ZSA9PT0gdGhpcy5kYXRlQXBwcm94TWFza3MuZGF5TW9udGhVbmtub3duKSB7XG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLm1vbnRoTmFtZSkuc2V0VmFsdWUodGhpcy51bmtub3duTW9udGhJdGVtLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGhhc1Vua25vd25Nb250aEl0ZW0pIHtcbiAgICAgICAgdGhpcy5tb250aE9wdGlvbnMuc2hpZnQoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5tb250aE5hbWUpLnZhbHVlID09PSB0aGlzLnVua25vd25Nb250aEl0ZW0udmFsdWUpIHtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAuZ2V0KHRoaXMubW9udGhOYW1lKS5yZXNldCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBTZXRzIGRhdGUgYXBwcm94IG1hc2sgICovXG4gIHByaXZhdGUgc2V0RGF0ZUFwcHJveE1hc2sodmFsdWU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBkYXRlQXBwcm94TWFza05hbWUgPSB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXRlQXBwcm94TWFza05hbWUpO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgaWYgKHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLm1vbnRoTmFtZSkudmFsdWUgPT09IHRoaXMudW5rbm93bk1vbnRoSXRlbS52YWx1ZSkge1xuICAgICAgICBkYXRlQXBwcm94TWFza05hbWUuc2V0VmFsdWUodGhpcy5kYXRlQXBwcm94TWFza3MuZGF5TW9udGhVbmtub3duKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGVBcHByb3hNYXNrTmFtZS5zZXRWYWx1ZSh0aGlzLmRhdGVBcHByb3hNYXNrcy5kYXlVbmtub3duKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZUFwcHJveE1hc2tOYW1lLnNldFZhbHVlKHRoaXMuZGF0ZUFwcHJveE1hc2tzLmtub3duKTtcbiAgICB9XG4gIH1cblxuICAvKiogU2V0IGFwcHJveCBjaGVja2JveCBzdHlsZSBpbiByZWFkb25seSBtb2RlICovXG4gIHByaXZhdGUgc2V0Q2hlY2tib3hTdHlsZShpc1JlYWRPbmx5OiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMuY2FuQmVBcHByb3hpbWF0aXZlICYmIHRoaXMuZm9ybUdyb3VwLmdldCh0aGlzLmRhdGVBcHByb3hDaGVja2JveE5hbWUpKSB7XG4gICAgICBpZiAoaXNSZWFkT25seSkge1xuICAgICAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXRlQXBwcm94Q2hlY2tib3hOYW1lKS5kaXNhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZvcm1Hcm91cC5nZXQodGhpcy5kYXRlQXBwcm94Q2hlY2tib3hOYW1lKS5lbmFibGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==